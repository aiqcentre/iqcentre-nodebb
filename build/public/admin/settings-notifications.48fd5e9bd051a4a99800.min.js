"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[38394,70565,83014,28253,99617,74344,86193],{62444:(A,p,c)=>{var h,m;h=[c(86193)],m=function(y){const g={};return g.init=function(){const i=$('[data-field="welcomeUid"]');y.user(i,function(l,E){setTimeout(function(){i.val(E.item.user.uid)})})},g}.apply(p,h),m!==void 0&&(A.exports=m)},74344:(A,p,c)=>{c.r(p),c.d(p,{del:()=>r,get:()=>f,head:()=>a,patch:()=>s,post:()=>u,put:()=>o});var h=c(85233),m=c.n(h),y=c(63281),g=c.n(y);const i=config.relative_path+"/api/v3";function l(t,e){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:i+t.url,typeof e=="function"){E(t,e);return}return new Promise((n,d)=>{E(t,function(x,D){if(x)return x.message==="A valid login session was not found. Please log in and try again."?(0,y.confirm)("[[error:api.reauth-required]]",v=>{v&&ajaxify.go("login")}):d(x);n(D)})})}async function E(t,e){const{url:n}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,h.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const d=await fetch(n,t),{headers:x}=d,D=x.get("content-type"),v=D&&D.startsWith("application/json");let _;if(v?_=await d.json():_=await d.text(),!d.ok)return e(new Error(v?_.status.message:_));e(null,v&&_.hasOwnProperty("status")&&_.hasOwnProperty("response")?_.response:_)}function f(t,e,n){return l({url:t+(e&&Object.keys(e).length?"?"+$.param(e):"")},n)}function a(t,e,n){return l({url:t+(e&&Object.keys(e).length?"?"+$.param(e):""),method:"head"},n)}function u(t,e,n){return l({url:t,method:"post",data:e,headers:{"x-csrf-token":config.csrf_token}},n)}function s(t,e,n){return l({url:t,method:"patch",data:e,headers:{"x-csrf-token":config.csrf_token}},n)}function o(t,e,n){return l({url:t,method:"put",data:e,headers:{"x-csrf-token":config.csrf_token}},n)}function r(t,e,n){return l({url:t,method:"delete",data:e,headers:{"x-csrf-token":config.csrf_token}},n)}},86193:(A,p,c)=>{var h,m;h=[c(74344),c(7927)],m=function(y,g){const i={},l={delay:200,appendTo:null};i.init=f=>{const a={...l,...f},{input:u,onSelect:s}=a;app.loadJQueryUI(function(){u.autocomplete({...a,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(o,r){E(u,s,o,r)}})})},i.user=function(f,a,u){typeof a=="function"&&(u=a,a={}),a=a||{},i.init({input:f,onSelect:u,source:(s,o)=>{a.query=s.term,y.get("/api/users",a,function(r,t){if(r)return g.error(r);if(t&&t.users){const e=t.users.map(function(n){const d=$("<div></div>").html(n.username).text();return n&&{label:d,value:d,user:{uid:n.uid,name:n.username,slug:n.userslug,username:n.username,userslug:n.userslug,picture:n.picture,banned:n.banned,"icon:text":n["icon:text"],"icon:bgColor":n["icon:bgColor"]}}});o(e)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},i.group=function(f,a){i.init({input:f,onSelect:a,source:(u,s)=>{socket.emit("groups.search",{query:u.term},function(o,r){if(o)return g.error(o);if(r&&r.length){const t=r.map(function(e){return e&&{label:e.name,value:e.name,group:e}});s(t)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},i.tag=function(f,a){i.init({input:f,onSelect:a,delay:100,source:(u,s)=>{socket.emit("topics.autocompleteTags",{query:u.term,cid:ajaxify.data.cid||0},function(o,r){if(o)return g.error(o);r&&s(r),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function E(f,a,u,s){a=a||function(){};const o=jQuery.Event("keypress");o.which=13,o.keyCode=13,setTimeout(function(){f.trigger(o)},100),a(u,s)}return i}.apply(p,h),m!==void 0&&(A.exports=m)}}]);
