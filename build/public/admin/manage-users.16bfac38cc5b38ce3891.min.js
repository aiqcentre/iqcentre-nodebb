"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[30160,70565,22852,83014,28253,99617,80560,73382,10999,74344,86193],{54582:(B,A,u)=>{var p,y;p=[u(32230),u(59006),u(86193),u(74344),u(22568),u(63281),u(7927),u(23884),u(59265)],y=function(w,E,x,g,I,d,s,h,b){const m={};m.init=function(){$("#results-per-page").val(ajaxify.data.resultsPerPage).on("change",function(){const e=utils.params();e.resultsPerPage=$("#results-per-page").val();const n=l(e);ajaxify.go(window.location.pathname+"?"+n)}),$(".export-csv").on("click",function(){return socket.once("event:export-users-csv",function(){s.remove("export-users-start"),s.alert({alert_id:"export-users",type:"success",title:"[[global:alert.success]]",message:"[[admin/manage/users:export-users-completed]]",clickfn:function(){window.location.href=config.relative_path+"/api/admin/users/csv"},timeout:0})}),socket.emit("admin.user.exportUsersCSV",{},function(e){if(e)return s.error(e);s.alert({alert_id:"export-users-start",message:"[[admin/manage/users:export-users-started]]",timeout:ajaxify.data.userCount/5e3*500})}),!1});function r(){const e=[];return $('.users-table [component="user/select/single"]').each(function(){$(this).is(":checked")&&e.push($(this).attr("data-uid"))}),e}function o(e,n){$('.users-table [component="user/select/single"]:checked').parents(".user-row").find(e).each(function(){$(this).toggleClass("hidden",!n)})}function D(){$('.users-table [component="user/select/single"]').prop("checked",!1),$('.users-table [component="user/select/all"]').prop("checked",!1)}function P(e){const n=document.querySelector(`.users-table [component="user/select/single"][data-uid="${e}"]`);if(n){const a=n.closest(".user-row");a.parentNode.removeChild(a)}}function _(e,n,a){return function(i){if(i)return s.error(i);s.success(e),n&&o(n,a),D()}}function W(e,n,a){s.success(e),n&&o(n,a),D()}$('[component="user/select/all"]').on("click",function(){$('.users-table [component="user/select/single"]').prop("checked",$(this).is(":checked"))}),$(".manage-groups").on("click",function(){const e=r();if(!e.length)return s.error("[[error:no-users-selected]]"),!1;socket.emit("admin.user.loadGroups",e,function(n,a){if(n)return s.error(n);E.render("admin/partials/manage_user_groups",a).then(function(i){const f=d.dialog({message:i,title:"[[admin/manage/users:manage-groups]]",onEscape:!0});f.on("shown.bs.modal",function(){x.group(f.find(".group-search"),function(v,C){const R=$(v.target).attr("data-uid");g.put("/groups/"+C.item.group.slug+"/membership/"+R,void 0).then(()=>{C.item.group.nameEscaped=w.escape(C.item.group.displayName),app.parseAndTranslate("admin/partials/manage_user_groups",{users:[{groups:[C.item.group]}]},function(N){$("[data-uid="+R+"] .group-area").append(N.find(".group-area").html())})}).catch(s.error)})}),f.on("click",".group-area a",function(){f.modal("hide")}),f.on("click",".remove-group-icon",function(){const v=$(this).parents("[data-group-name]"),C=v.attr("data-group-name"),R=$(this).parents("[data-uid]").attr("data-uid");return g.del("/groups/"+I(C)+"/membership/"+R).then(()=>{v.remove()}).catch(s.error),!1})})})}),$(".set-reputation").on("click",function(){const e=r();if(!e.length)return s.error("[[error:no-users-selected]]"),!1;let n="";if(e.length===1){const i=ajaxify.data.users.find(f=>f&&f.uid===parseInt(e[0],10));i&&(n=String(i.reputation))}const a=d.dialog({message:`<input id="new-reputation" type="text" class="form-control" value="${n}">`,title:"[[admin/manage/users:set-reputation]]",onEscape:!0,buttons:{submit:{label:"[[global:save]]",callback:function(){const i=a.find("#new-reputation").val();if(!utils.isNumber(i))return s.error("[[error:invalid-data]]"),!1;socket.emit("admin.user.setReputation",{value:i,uids:e}).then(()=>{e.forEach(f=>{$(`[component="user/reputation"][data-uid="${f}"]`).text(b.formattedNumber(i));const v=ajaxify.data.users.find(C=>C&&C.uid===parseInt(f,10));v&&(v.reputation=i)})}).catch(s.error)}}}});a.on("shown.bs.modal",()=>{a.find("#new-reputation").selectRange(0,a.find("#new-reputation").val().length)})}),$(".ban-user").on("click",function(){const e=r();if(!e.length)return s.error("[[error:no-users-selected]]"),!1;d.confirm(e.length>1?"[[admin/manage/users:alerts.confirm-ban-multi]]":"[[admin/manage/users:alerts.confirm-ban]]",function(n){n&&Promise.all(e.map(function(a){return g.put("/users/"+a+"/ban")})).then(()=>{W("[[admin/manage/users:alerts.ban-success]]",".ban",!0)}).catch(s.error)})}),$(".ban-user-temporary").on("click",function(){const e=r();if(!e.length)return s.error("[[error:no-users-selected]]"),!1;E.render("modals/temporary-ban",{}).then(function(n){d.dialog({className:"ban-modal",title:"[[user:ban_account]]",message:n,show:!0,buttons:{close:{label:"[[global:close]]",className:"btn-link"},submit:{label:"[[admin/manage/users:alerts.button-ban-x, "+e.length+"]]",callback:function(){const a=$(".ban-modal form").serializeArray().reduce(function(f,v){return f[v.name]=v.value,f},{}),i=a.length>0?Date.now()+a.length*1e3*60*60*(parseInt(a.unit,10)?24:1):0;Promise.all(e.map(function(f){return g.put("/users/"+f+"/ban",{until:i,reason:a.reason})})).then(()=>{W("[[admin/manage/users:alerts.ban-success]]",".ban",!0)}).catch(s.error)}}}})})}),$(".unban-user").on("click",function(){const e=r();if(!e.length)return s.error("[[error:no-users-selected]]"),!1;Promise.all(e.map(function(n){return g.del("/users/"+n+"/ban")})).then(()=>{W("[[admin/manage/users:alerts.unban-success]]",".ban",!1)})}),$(".reset-lockout").on("click",function(){const e=r();e.length&&socket.emit("admin.user.resetLockouts",e,_("[[admin/manage/users:alerts.lockout-reset-success]]"))}),$(".validate-email").on("click",function(){const e=r();e.length&&d.confirm("[[admin/manage/users:alerts.confirm-validate-email]]",function(n){n&&socket.emit("admin.user.validateEmail",e,function(a){if(a)return s.error(a);s.success("[[admin/manage/users:alerts.validate-email-success]]"),o(".notvalidated",!1),o(".pending",!1),o(".expired",!1),o(".validated",!1),o(".validated-by-admin",!0),D()})})}),$(".send-validation-email").on("click",function(){const e=r();e.length&&socket.emit("admin.user.sendValidationEmail",e,function(n){if(n)return s.error(n);s.success("[[notifications:email-confirm-sent]]")})}),$(".password-reset-email").on("click",function(){const e=r();e.length&&d.confirm("[[admin/manage/users:alerts.password-reset-confirm]]",function(n){n&&socket.emit("admin.user.sendPasswordResetEmail",e,_("[[admin/manage/users:alerts.password-reset-email-sent]]"))})}),$(".force-password-reset").on("click",function(){const e=r();e.length&&d.confirm("[[admin/manage/users:alerts.confirm-force-password-reset]]",function(n){n&&socket.emit("admin.user.forcePasswordReset",e,_("[[admin/manage/users:alerts.validate-force-password-reset-success]]"))})}),$(".delete-user").on("click",()=>{U("[[admin/manage/users:alerts.confirm-delete]]","/account")}),$(".delete-user-content").on("click",()=>{U("[[admin/manage/users:alerts.confirm-delete-content]]","/content")}),$(".delete-user-and-content").on("click",()=>{U("[[admin/manage/users:alerts.confirm-purge]]","")});const K=document.querySelector(".users-table"),F=document.getElementById("action-dropdown");K.addEventListener("change",e=>{(e.target.closest('[component="user/select/single"]')||e.target.closest('[component="user/select/all"]'))&&(r().length?F.removeAttribute("disabled"):F.setAttribute("disabled","disabled"))});function U(e,n){const a=r();a.length&&d.confirm(e,function(i){i&&Promise.all(a.map(f=>g.del(`/users/${f}${n}`,{}).then(()=>{n!=="/content"&&P(f)}))).then(()=>{n!=="/content"?s.success("[[admin/manage/users:alerts.delete-success]]"):s.success("[[admin/manage/users:alerts.delete-content-success]]"),D(),$('.users-table [component="user/select/single"]').length||ajaxify.refresh()}).catch(s.error)})}function j(){$('[data-action="create"]').on("click",function(){return E.render("admin/partials/create_user_modal",{}).then(function(e){const n=d.dialog({message:e,title:"[[admin/manage/users:alerts.create]]",onEscape:!0,buttons:{cancel:{label:"[[admin/manage/users:alerts.button-cancel]]",className:"btn-link"},create:{label:"[[admin/manage/users:alerts.button-create]]",className:"btn-primary",callback:function(){return H.call(this),!1}}}});n.on("shown.bs.modal",function(){n.find("#create-user-name").focus()})}),!1})}function H(){const e=this,n=document.getElementById("create-user-name").value,a=document.getElementById("create-user-email").value,i=document.getElementById("create-user-password").value,f=document.getElementById("create-user-password-again").value,v=$("#create-modal-error");if(i!==f)return v.translateHtml("[[admin/manage/users:alerts.error-x, [[admin/manage/users:alerts.error-passwords-different]]]]").removeClass("hide");const C={username:n,email:a,password:i};g.post("/users",C).then(()=>{e.modal("hide"),e.on("hidden.bs.modal",function(){ajaxify.refresh()}),s.success("[[admin/manage/users:alerts.create-success]]")}).catch(R=>v.translateHtml("[[admin/manage/users:alerts.error-x, "+R.message+"]]").removeClass("hidden"))}k(),j(),S(),T(),h.handle()};function k(){function r(){$(".fa-spinner").removeClass("hidden"),t({searchBy:$("#user-search-by").val(),query:$("#user-search").val(),page:1})}$("#user-search").on("keyup",utils.debounce(r,250)),$("#user-search-by").on("change",r)}function t(r){const o=utils.params();o.searchBy=r.searchBy,o.query=r.query,o.page=r.page,o.sortBy=o.sortBy||"lastonline";const D=decodeURIComponent($.param(o));$.get(config.relative_path+"/api/admin/manage/users?"+D,function(P){c(P);const _=config.relative_path+"/admin/manage/users?"+D;history.pushState&&history.pushState({url:_},null,window.location.protocol+"//"+window.location.host+_)}).fail(function(P){P&&P.responseJSON&&P.responseJSON.error&&s.error(P.responseJSON.error)})}function c(r){E.render("partials/paginator",{pagination:r.pagination}).then(function(o){$(".pagination-container").replaceWith(o)}),app.parseAndTranslate("admin/manage/users","users",r,function(o){if($(".users-table tbody tr").remove(),$(".users-table tbody").append(o),o.find(".timeago").timeago(),$(".fa-spinner").addClass("hidden"),!$("#user-search").val()){$("#user-found-notify").addClass("hidden"),$("#user-notfound-notify").addClass("hidden");return}r&&r.users.length===0?($("#user-notfound-notify").translateHtml("[[admin/manage/users:search.not-found]]").removeClass("hidden"),$("#user-found-notify").addClass("hidden")):($("#user-found-notify").translateHtml(w.compile("admin/manage/users:alerts.x-users-found",r.matchCount,r.timing)).removeClass("hidden"),$("#user-notfound-notify").addClass("hidden"))})}function l(r){return $("#user-search").val()?(r.query=$("#user-search").val(),r.searchBy=$("#user-search-by").val()):(delete r.query,delete r.searchBy),decodeURIComponent($.param(r))}function S(){$(".users-table thead th").on("click",function(){const o=$(this).attr("data-sort");if(!o)return;const D=utils.params();D.sortBy=o,ajaxify.data.sortBy===o?D.sortDirection=ajaxify.data.reverse?"asc":"desc":D.sortDirection="desc";const P=l(D);ajaxify.go("admin/manage/users?"+P)})}function M(){const r=[];return $("#filter-by").find("[data-filter-by]").each(function(){$(this).find(".fa-check").length&&r.push($(this).attr("data-filter-by"))}),r}function T(){let r=M();$("#filter-by").on("click","li",function(){const o=$(this);return o.find("i").toggleClass("fa-check",!o.find("i").hasClass("fa-check")),!1}),$("#filter-by").on("hidden.bs.dropdown",function(){const o=M();let D=o.length!==r.length;if(o.length===r.length&&o.forEach(function(P,_){P!==r[_]&&(D=!0)}),r=M(),D){const P=utils.params();P.filters=o;const _=l(P);ajaxify.go("admin/manage/users?"+_)}})}return m}.apply(A,p),y!==void 0&&(B.exports=y)},23884:(B,A,u)=>{var p,y;p=[u(74344),u(59006),u(63281),u(7927)],y=function(w,E,x,g){const I={};function d(){return ajaxify.data.template.name.startsWith("admin/")}return I.handle=function(){$('[component="user/invite"]').on("click",function(s){s.preventDefault(),w.get(`/api/v3/users/${app.user.uid}/invites/groups`,{}).then(h=>{E.parse("modals/invite",{groups:h},function(b){x.dialog({message:b,title:`[[${d()?"admin/manage/users:invite":"users:invite"}]]`,onEscape:!0,buttons:{cancel:{label:`[[${d()?"admin/manage/users:alerts.button-cancel":"modules:bootbox.cancel"}]]`,className:"btn-default"},invite:{label:`[[${d()?"admin/manage/users:invite":"users:invite"}]]`,className:"btn-primary",callback:I.send}}})})}).catch(g.error)})},I.send=function(){const s=$("#invite-modal-emails"),h=$("#invite-modal-groups"),b={emails:s.val().split(",").map(m=>m.trim()).filter(Boolean).filter((m,k,t)=>k===t.indexOf(m)).join(","),groupsToJoin:h.val()};b.emails&&w.post(`/users/${app.user.uid}/invites`,b).then(()=>{g.success(`[[${d()?"admin/manage/users:alerts.email-sent-to":"users:invitation-email-sent"}, ${b.emails.replace(/,/g,"&#44; ")}]]`)}).catch(g.error)},I}.apply(A,p),y!==void 0&&(B.exports=y)},74344:(B,A,u)=>{u.r(A),u.d(A,{del:()=>k,get:()=>d,head:()=>s,patch:()=>b,post:()=>h,put:()=>m});var p=u(85233),y=u.n(p),w=u(63281),E=u.n(w);const x=config.relative_path+"/api/v3";function g(t,c){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:x+t.url,typeof c=="function"){I(t,c);return}return new Promise((l,S)=>{I(t,function(M,T){if(M)return M.message==="A valid login session was not found. Please log in and try again."?(0,w.confirm)("[[error:api.reauth-required]]",r=>{r&&ajaxify.go("login")}):S(M);l(T)})})}async function I(t,c){const{url:l}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,p.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const S=await fetch(l,t),{headers:M}=S,T=M.get("content-type"),r=T&&T.startsWith("application/json");let o;if(r?o=await S.json():o=await S.text(),!S.ok)return c(new Error(r?o.status.message:o));c(null,r&&o.hasOwnProperty("status")&&o.hasOwnProperty("response")?o.response:o)}function d(t,c,l){return g({url:t+(c&&Object.keys(c).length?"?"+$.param(c):"")},l)}function s(t,c,l){return g({url:t+(c&&Object.keys(c).length?"?"+$.param(c):""),method:"head"},l)}function h(t,c,l){return g({url:t,method:"post",data:c,headers:{"x-csrf-token":config.csrf_token}},l)}function b(t,c,l){return g({url:t,method:"patch",data:c,headers:{"x-csrf-token":config.csrf_token}},l)}function m(t,c,l){return g({url:t,method:"put",data:c,headers:{"x-csrf-token":config.csrf_token}},l)}function k(t,c,l){return g({url:t,method:"delete",data:c,headers:{"x-csrf-token":config.csrf_token}},l)}},86193:(B,A,u)=>{var p,y;p=[u(74344),u(7927)],y=function(w,E){const x={},g={delay:200,appendTo:null};x.init=d=>{const s={...g,...d},{input:h,onSelect:b}=s;app.loadJQueryUI(function(){h.autocomplete({...s,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(m,k){I(h,b,m,k)}})})},x.user=function(d,s,h){typeof s=="function"&&(h=s,s={}),s=s||{},x.init({input:d,onSelect:h,source:(b,m)=>{s.query=b.term,w.get("/api/users",s,function(k,t){if(k)return E.error(k);if(t&&t.users){const c=t.users.map(function(l){const S=$("<div></div>").html(l.username).text();return l&&{label:S,value:S,user:{uid:l.uid,name:l.username,slug:l.userslug,username:l.username,userslug:l.userslug,picture:l.picture,banned:l.banned,"icon:text":l["icon:text"],"icon:bgColor":l["icon:bgColor"]}}});m(c)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},x.group=function(d,s){x.init({input:d,onSelect:s,source:(h,b)=>{socket.emit("groups.search",{query:h.term},function(m,k){if(m)return E.error(m);if(k&&k.length){const t=k.map(function(c){return c&&{label:c.name,value:c.name,group:c}});b(t)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},x.tag=function(d,s){x.init({input:d,onSelect:s,delay:100,source:(h,b)=>{socket.emit("topics.autocompleteTags",{query:h.term,cid:ajaxify.data.cid||0},function(m,k){if(m)return E.error(m);k&&b(k),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function I(d,s,h,b){s=s||function(){};const m=jQuery.Event("keypress");m.which=13,m.keyCode=13,setTimeout(function(){d.trigger(m)},100),s(h,b)}return x}.apply(A,p),y!==void 0&&(B.exports=y)},11120:B=>{B.exports=function(A,u,p){u.setGlobal("true",!0),u.setGlobal("false",!1);const y=24*60*60*1e3,w={displayMenuItem:x,buildMetaTag:g,buildLinkTag:I,stringify:d,escape:s,stripTags:h,buildCategoryIcon:b,buildCategoryLabel:m,generateCategoryBackground:k,generateChildrenCategories:t,generateTopicClass:c,membershipBtn:l,spawnPrivilegeStates:S,localeToHTML:M,renderTopicImage:T,renderDigestAvatar:r,userAgentIcons:o,buildAvatar:D,increment:P,generateRepliedTo:_,generateWrote:W,isoTimeToLocaleString:K,shouldHideReplyContainer:F,humanReadableNumber:U,formattedNumber:j,register:H,__escape:E};function E(e){return e}function x(e,n){const a=e.navigation[n];return!(!a||a.route.match("/users")&&e.user&&!e.user.privileges["view:users"]||a.route.match("/tags")&&e.user&&!e.user.privileges["view:tags"]||a.route.match("/groups")&&e.user&&!e.user.privileges["view:groups"])}function g(e){const n=e.name?'name="'+e.name+'" ':"",a=e.property?'property="'+e.property+'" ':"",i=e.content?'content="'+e.content.replace(/\n/g," ")+'" ':"";return"<meta "+n+a+i+`/>
	`}function I(e){const n=["link","rel","as","type","href","sizes","title","crossorigin"],[a,i,f,v,C,R,N,J]=n.map(L=>e[L]?`${L}="${e[L]}" `:"");return"<link "+a+i+f+v+R+N+C+J+`/>
	`}function d(e){return JSON.stringify(e).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/g,"&quot;")}function s(e){return A.escapeHTML(e)}function h(e){return A.stripHTMLTags(e)}function b(e,n,a){return e?`<span class="icon d-inline-flex justify-content-center align-items-center align-middle ${a}" style="${k(e)} width:${n}; height: ${n}; font-size: ${parseInt(n,10)/2}px;">${e.icon?`<i class="fa fa-fw ${e.icon}"></i>`:""}</span>`:""}function m(e,n=""){return e?`<span class="badge px-1 ${n}" style="color: ${e.color};background-color: ${e.bgColor};border-color: ${e.bgColor}!important;">
			${e.icon&&e.icon!=="fa-nbb-none"?`<i class="fa fa-fw ${e.icon}"></i>`:""}
			${e.name}
		</span>`:""}function k(e){if(!e)return"";const n=[];return e.bgColor&&(n.push("background-color: "+e.bgColor),n.push(`border-color: ${e.bgColor}!important`)),e.color&&n.push("color: "+e.color),e.backgroundImage&&(n.push("background-image: url("+e.backgroundImage+")"),e.imageClass&&n.push("background-size: "+e.imageClass)),n.join("; ")+";"}function t(e){let n="";return!e||!e.children||!e.children.length||(e.children.forEach(function(a){if(a&&!a.isSection){const i=a.link?a.link:p+"/category/"+a.slug;n+='<span class="category-children-item float-start"><div role="presentation" class="icon float-start" style="'+k(a)+'"><i class="fa fa-fw '+a.icon+'"></i></div><a href="'+i+'"><small>'+a.name+"</small></a></span>"}}),n=n&&'<span class="category-children">'+n+"</span>"),n}function c(e){return["locked","pinned","deleted","unread","scheduled"].filter(a=>!!e[a]).join(" ")}function l(e,n=""){return e.isMember&&e.name!=="administrators"?`<button class="btn btn-danger ${n}" data-action="leave" data-group="${e.displayName}" ${e.disableLeave?" disabled":""}><i class="fa fa-times"></i> [[groups:membership.leave-group]]</button>`:e.isPending&&e.name!=="administrators"?`<button class="btn btn-warning disabled ${n}"><i class="fa fa-clock-o"></i> [[groups:membership.invitation-pending]]</button>`:e.isInvited?`<button class="btn btn-link" data-action="rejectInvite" data-group="${e.displayName}">[[groups:membership.reject]]</button><button class="btn btn-success" data-action="acceptInvite" data-group="${e.name}"><i class="fa fa-plus"></i> [[groups:membership.accept-invitation]]</button>`:!e.disableJoinRequests&&e.name!=="administrators"?`<button class="btn btn-success" data-action="join" data-group="${e.displayName}"><i class="fa fa-plus"></i> [[groups:membership.join-group]]</button>`:""}function S(e,n){const a=[];for(const i in n)n.hasOwnProperty(i)&&a.push({name:i,state:n[i]});return a.map(function(i){const f=["groups:moderate","groups:posts:upvote","groups:posts:downvote","groups:local:login","groups:group:create"],v=["groups:find","groups:read","groups:topics:read","groups:view:users","groups:view:tags","groups:view:groups"],C=["groups:moderate"],R=e==="guests"&&(f.includes(i.name)||i.name.startsWith("groups:admin:"))||e==="spiders"&&!v.includes(i.name)||e==="Global Moderators"&&C.includes(i.name);return`
				<td data-privilege="${i.name}" data-value="${i.state}">
					<div class="form-check text-center">
						<input class="form-check-input float-none" autocomplete="off" type="checkbox"${i.state?" checked":""}${R?' disabled="disabled"':""} />
					</div>
				</td>
			`}).join("")}function M(e,n){return e=e||n||"en-GB",e.replace("_","-")}function T(e){return e.thumb?'<img src="'+e.thumb+'" class="img-circle user-img" title="'+e.user.username+'" />':'<img component="user/picture" data-uid="'+e.user.uid+'" src="'+e.user.picture+'" class="user-img" title="'+e.user.username+'" />'}function r(e){return e.teaser?e.teaser.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.teaser.user.picture+'" title="'+e.teaser.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.teaser.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.teaser.user["icon:text"]+"</div>":e.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.user.picture+'" title="'+e.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.user["icon:text"]+"</div>"}function o(e){let n="";switch(e.platform){case"Linux":n+='<i class="fa fa-fw fa-linux"></i>';break;case"Microsoft Windows":n+='<i class="fa fa-fw fa-windows"></i>';break;case"Apple Mac":n+='<i class="fa fa-fw fa-apple"></i>';break;case"Android":n+='<i class="fa fa-fw fa-android"></i>';break;case"iPad":n+='<i class="fa fa-fw fa-tablet"></i>';break;case"iPod":case"iPhone":n+='<i class="fa fa-fw fa-mobile"></i>';break;default:n+='<i class="fa fa-fw fa-question-circle"></i>';break}switch(e.browser){case"Chrome":n+='<i class="fa fa-fw fa-chrome"></i>';break;case"Firefox":n+='<i class="fa fa-fw fa-firefox"></i>';break;case"Safari":n+='<i class="fa fa-fw fa-safari"></i>';break;case"IE":n+='<i class="fa fa-fw fa-internet-explorer"></i>';break;case"Edge":n+='<i class="fa fa-fw fa-edge"></i>';break;default:n+='<i class="fa fa-fw fa-question-circle"></i>';break}return n}function D(e,n,a,i,f){e||(e=this);const v=new Map([["alt",e.username],["title",e.username],["data-uid",e.uid],["loading","lazy"]]),C=[`--avatar-size: ${n};`],R=J=>Array.from(J).reduce((L,[z,Y])=>(L+=` ${z}="${Y}"`,L),"");i=i||"",v.set("class",`avatar ${i}${a?" avatar-rounded":""}`);let N="";return e.picture&&(v.set("component",f||"avatar/picture"),N+="<img "+R(v)+' src="'+e.picture+'" style="'+C.join(" ")+'" onError="this.remove();" itemprop="image" />'),v.set("component",f||"avatar/icon"),C.push("background-color: "+e["icon:bgColor"]+";"),N+="<span "+R(v)+' style="'+C.join(" ")+'">'+e["icon:text"]+"</span>",N}function P(e,n){return e+parseInt(n,10)}function _(e,n){const a=e.parent&&e.parent.displayname?e.parent.displayname:"[[global:guest]]";return`[[topic:replied-to-user-${e.timestamp<Date.now()-n*y?"on":"ago"}, ${e.toPid}, ${p}/post/${e.toPid}, ${a}, ${p}/post/${e.pid}, ${e.timestampISO}]]`}function W(e,n){return`[[topic:wrote-${e.timestamp<Date.now()-n*y?"on":"ago"}, ${p}/post/${e.pid}, ${e.timestampISO}]]`}function K(e){return new Date(e).toLocaleString().replace(/,/g,"&#44;")}function F(e){return!!(e.replies.count<=0||e.replies.hasSingleImmediateReply)}function U(e,n=1){return A.makeNumberHumanReadable(e,n)}function j(e){return A.addCommas(e)}function H(){Object.keys(w).forEach(function(e){u.registerHelper(e,w[e])})}return w}},59265:(B,A,u)=>{var p,y;const w=u(11120);p=[u(96795),u(59006)],y=function(E,x){return w(E,x,config.relative_path)}.apply(A,p),y!==void 0&&(B.exports=y)},22568:(B,A,u)=>{var p,y,w;(function(E){y=[u(20648)],p=E,w=typeof p=="function"?p.apply(A,y):p,w!==void 0&&(B.exports=w)})(function(E){const x=E("[^\\p{L}\\s\\d\\-_]","g"),g=/[^\w\s\d\-_]/g,I=/^\s+|\s+$/g,d=/\s+/g,s=/-+/g,h=/-$/g,b=/^-/g,m=/^[\w\d\s.,\-@]+$/;return function(t,c){return t?(t=String(t).replace(I,""),m.test(t)?t=t.replace(g,"-"):t=E.replace(t,x,"-"),t=c?t:t.toLocaleLowerCase(),t=t.replace(d,"-"),t=t.replace(s,"-"),t=t.replace(h,""),t=t.replace(b,""),t):""}})}}]);
