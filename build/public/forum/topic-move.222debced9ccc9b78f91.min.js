"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[17434,66623,49286],{57378:(y,h,r)=>{var u,f;u=[r(50548),r(7927),r(85233)],f=function(C,g,p){const n={};let e,t;n.init=function(o,l,d){e||(n.tids=o,n.currentCid=l,n.onComplete=d,n.moveAll=!o,a())};function a(){app.parseAndTranslate("modals/move-topic",{},function(o){e=o,$("body").append(e),(n.moveAll||n.tids&&n.tids.length>1)&&e.find(".card-header").translateText("[[topic:move_topics]]"),C.init(e.find('[component="category-selector"]'),{onSelect:i,privilege:"moderate"}),e.find("#move_thread_commit").on("click",c),e.find("#move_topic_cancel").on("click",s)})}function i(o){t=o,e.find("#move_thread_commit").prop("disabled",!1)}function c(){const o=e.find("#move_thread_commit");if(!o.prop("disabled")&&t&&t.cid){o.prop("disabled",!0),s();let l="[[topic:topic_move_success, "+t.name+"]]";n.tids&&n.tids.length>1?l="[[topic:topic_move_multiple_success, "+t.name+"]]":n.tids||(l="[[topic:topic_move_all_success, "+t.name+"]]");const d={tids:n.tids?n.tids.slice():null,cid:t.cid,currentCid:n.currentCid,onComplete:n.onComplete};if(config.undoTimeout>0)return g.alert({alert_id:"tids_move_"+(n.tids?n.tids.join("-"):"all"),title:"[[topic:thread_tools.move]]",message:l,type:"success",timeout:config.undoTimeout,timeoutfn:function(){m(d)},clickfn:function(v,_){delete _.timeoutfn,g.success("[[topic:topic_move_undone]]")}});m(d)}}function m(o){p.fire("action:topic.move",o),socket.emit(o.tids?"topics.move":"topics.moveAll",o,function(l){if(l)return g.error(l);typeof o.onComplete=="function"&&o.onComplete()})}function s(){e&&(e.remove(),e=null)}return n}.apply(h,u),f!==void 0&&(y.exports=f)},22905:(y,h,r)=>{var u,f;u=[r(7927),r(73138)],f=function(C,g){const p={};return p.init=function(n,e){let t=null;e=e||{},e.privilege=e.privilege||"topics:read",e.states=e.states||["watching","notwatching","ignoring"],e.cacheList=e.hasOwnProperty("cacheList")?e.cacheList:!0;let a=[];Array.isArray(e.localCategories)&&(a=e.localCategories.map(o=>({...o}))),e.selectedCids=e.selectedCids||ajaxify.data.selectedCids||[];const i=n.find('[component="category-selector-search"]');if(!i.length)return;const c=i.parent('[component="category/dropdown"]').length>0||i.parent('[component="category-selector"]').length>0;n.on("show.bs.dropdown",function(){c&&(n.find(".dropdown-toggle").css({visibility:"hidden"}),i.removeClass("hidden"),i.css({"z-index":n.find(".dropdown-toggle").css("z-index")+1}));function o(){const l=i.find("input").val();l.length>1||!l&&!t?m(l,function(d){t=e.cacheList&&(t||d),s(d)}):!l&&t&&s(t)}i.on("click",function(l){l.preventDefault(),l.stopPropagation()}),i.find("input").val("").on("keyup",utils.debounce(o,300)),o()}),n.on("shown.bs.dropdown",function(){["xs","sm"].includes(utils.findBootstrapEnvironment())||i.find("input").focus()}),n.on("hide.bs.dropdown",function(){c&&(n.find(".dropdown-toggle").css({visibility:"inherit"}),i.addClass("hidden")),i.off("click"),i.find("input").off("keyup")});function m(o,l){socket.emit("categories.categorySearch",{search:o,query:utils.params(),parentCid:e.parentCid||0,selectedCids:e.selectedCids,privilege:e.privilege,states:e.states,showLinks:e.showLinks},function(d,v){if(d)return C.error(d);l(a.concat(v))})}function s(o){const l=e.selectedCids.map(String);o.forEach(function(d){d.selected=l.includes(String(d.cid))}),app.parseAndTranslate(e.template,{categoryItems:o.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(d){n.find('[component="category/list"]').html(d.find('[component="category/list"]').html()),n.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!o.length);const v=g.Dropdown.getInstance(n.find(".dropdown-toggle").get(0));v&&v.update()})}},p}.apply(h,u),f!==void 0&&(y.exports=f)},50548:(y,h,r)=>{var u,f;u=[r(22905),r(63281),r(85233),r(32230)],f=function(C,g,p,n){const e={};return e.init=function(t,a){if(!t||!t.length)return;a=a||{};const i=a.onSelect||function(){};a.states=a.states||["watching","notwatching","ignoring"],a.template=a.template||"partials/category/selector-dropdown-left",p.fire("action:category.selector.options",{el:t,options:a}),C.init(t,a);const c={el:t,selectedCategory:null};t.on("click","[data-cid]",function(){const s=$(this);return s.hasClass("disabled")?!1:(c.selectCategory(s.attr("data-cid")),i(c.selectedCategory))});let m=c.el.find('[component="category-selector-selected"]').html();return n.translate(m,s=>{m=s}),c.selectCategory=function(s){const o=c.el.find('[data-cid="'+s+'"]');c.selectedCategory={cid:s,name:o.attr("data-name")},o.length?c.el.find('[component="category-selector-selected"]').html(o.find('[component="category-markup"]').html()):c.el.find('[component="category-selector-selected"]').html(m)},c.getSelectedCategory=function(){return c.selectedCategory},c.getSelectedCid=function(){return c.selectedCategory?c.selectedCategory.cid:0},a.hasOwnProperty("selectedCategory")&&app.parseAndTranslate(a.template,{selectedCategory:a.selectedCategory},function(s){c.el.find('[component="category-selector-selected"]').html(s.find('[component="category-selector-selected"]').html())}),c},e.modal=function(t){t=t||{},t.onSelect=t.onSelect||function(){},t.onSubmit=t.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:t.message},function(a){const i=g.dialog({title:t.title||"[[modules:composer.select_category]]",message:a,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:m}}}),c=e.init(i.find('[component="category-selector"]'),t);function m(s){return s.preventDefault(),c.selectedCategory&&(t.onSubmit(c.selectedCategory),i.modal("hide")),!1}t.openOnLoad&&i.on("shown.bs.modal",function(){i.find(".dropdown-toggle").dropdown("toggle")}),i.find("form").on("submit",m)})},e}.apply(h,u),f!==void 0&&(y.exports=f)}}]);
