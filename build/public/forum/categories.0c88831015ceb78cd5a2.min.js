"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[24307,66623,49286],{64860:(h,p,g)=>{var f,i;f=[g(50548)],i=function(C){const y={};return y.init=function(){app.enterRoom("categories"),C.init($('[component="category-selector"]'),{privilege:"find",onSelect:function(m){ajaxify.go("/category/"+m.cid)}})},y}.apply(p,f),i!==void 0&&(h.exports=i)},22905:(h,p,g)=>{var f,i;f=[g(7927),g(73138)],i=function(C,y){const m={};return m.init=function(l,e){let t=null;e=e||{},e.privilege=e.privilege||"topics:read",e.states=e.states||["watching","notwatching","ignoring"],e.cacheList=e.hasOwnProperty("cacheList")?e.cacheList:!0;let a=[];Array.isArray(e.localCategories)&&(a=e.localCategories.map(r=>({...r}))),e.selectedCids=e.selectedCids||ajaxify.data.selectedCids||[];const c=l.find('[component="category-selector-search"]');if(!c.length)return;const n=c.parent('[component="category/dropdown"]').length>0||c.parent('[component="category-selector"]').length>0;l.on("show.bs.dropdown",function(){n&&(l.find(".dropdown-toggle").css({visibility:"hidden"}),c.removeClass("hidden"),c.css({"z-index":l.find(".dropdown-toggle").css("z-index")+1}));function r(){const s=c.find("input").val();s.length>1||!s&&!t?u(s,function(d){t=e.cacheList&&(t||d),o(d)}):!s&&t&&o(t)}c.on("click",function(s){s.preventDefault(),s.stopPropagation()}),c.find("input").val("").on("keyup",utils.debounce(r,300)),r()}),l.on("shown.bs.dropdown",function(){["xs","sm"].includes(utils.findBootstrapEnvironment())||c.find("input").focus()}),l.on("hide.bs.dropdown",function(){n&&(l.find(".dropdown-toggle").css({visibility:"inherit"}),c.addClass("hidden")),c.off("click"),c.find("input").off("keyup")});function u(r,s){socket.emit("categories.categorySearch",{search:r,query:utils.params(),parentCid:e.parentCid||0,selectedCids:e.selectedCids,privilege:e.privilege,states:e.states,showLinks:e.showLinks},function(d,E){if(d)return C.error(d);s(a.concat(E))})}function o(r){const s=e.selectedCids.map(String);r.forEach(function(d){d.selected=s.includes(String(d.cid))}),app.parseAndTranslate(e.template,{categoryItems:r.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(d){l.find('[component="category/list"]').html(d.find('[component="category/list"]').html()),l.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!r.length);const E=y.Dropdown.getInstance(l.find(".dropdown-toggle").get(0));E&&E.update()})}},m}.apply(p,f),i!==void 0&&(h.exports=i)},50548:(h,p,g)=>{var f,i;f=[g(22905),g(63281),g(85233),g(32230)],i=function(C,y,m,l){const e={};return e.init=function(t,a){if(!t||!t.length)return;a=a||{};const c=a.onSelect||function(){};a.states=a.states||["watching","notwatching","ignoring"],a.template=a.template||"partials/category/selector-dropdown-left",m.fire("action:category.selector.options",{el:t,options:a}),C.init(t,a);const n={el:t,selectedCategory:null};t.on("click","[data-cid]",function(){const o=$(this);return o.hasClass("disabled")?!1:(n.selectCategory(o.attr("data-cid")),c(n.selectedCategory))});let u=n.el.find('[component="category-selector-selected"]').html();return l.translate(u,o=>{u=o}),n.selectCategory=function(o){const r=n.el.find('[data-cid="'+o+'"]');n.selectedCategory={cid:o,name:r.attr("data-name")},r.length?n.el.find('[component="category-selector-selected"]').html(r.find('[component="category-markup"]').html()):n.el.find('[component="category-selector-selected"]').html(u)},n.getSelectedCategory=function(){return n.selectedCategory},n.getSelectedCid=function(){return n.selectedCategory?n.selectedCategory.cid:0},a.hasOwnProperty("selectedCategory")&&app.parseAndTranslate(a.template,{selectedCategory:a.selectedCategory},function(o){n.el.find('[component="category-selector-selected"]').html(o.find('[component="category-selector-selected"]').html())}),n},e.modal=function(t){t=t||{},t.onSelect=t.onSelect||function(){},t.onSubmit=t.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:t.message},function(a){const c=y.dialog({title:t.title||"[[modules:composer.select_category]]",message:a,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:u}}}),n=e.init(c.find('[component="category-selector"]'),t);function u(o){return o.preventDefault(),n.selectedCategory&&(t.onSubmit(n.selectedCategory),c.modal("hide")),!1}t.openOnLoad&&c.on("shown.bs.modal",function(){c.find(".dropdown-toggle").dropdown("toggle")}),c.find("form").on("submit",u)})},e}.apply(p,f),i!==void 0&&(h.exports=i)}}]);
