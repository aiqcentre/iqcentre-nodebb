(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[92545,70565,61762,83014,66623,49286,99617,88529,42550,10999,74344],{22626:(D,A,d)=>{"use strict";var E,b;E=[d(24987),d(18487),d(7237),d(38565),d(98192),d(32230),d(74344),d(22568),d(50548),d(63281),d(7927)],b=function(C,s,m,n,o,e,c,a,f,g,l){const t={};let i;t.init=function(){const p=m.get("groups/container");i=ajaxify.data.group.name,ajaxify.data.group.isOwner&&(t.prepareSettings(),n.init(m.get("groups/cover"),function(h,u,y){socket.emit("groups.cover.update",{groupName:i,imageData:h,position:u},y)},function(){o.show({title:"[[groups:upload-group-cover]]",socketMethod:"groups.cover.update",aspectRatio:NaN,allowSkippingCrop:!0,restrictImageDimension:!1,paramName:"groupName",paramValue:i},function(h){h=(h.startsWith("http")?"":config.relative_path)+h+"?"+Date.now(),m.get("groups/cover").css("background-image","url("+h+")")})},v)),C.init(),r(),m.get("groups/activity").find(".content img:not(.not-responsive)").addClass("img-fluid"),p.on("click","[data-action]",function(){const h=$(this),u=h.parents("[data-uid]"),y=u.find('[component="groups/owner/icon"]'),x=!!parseInt(u.attr("data-isowner"),10),w=u.attr("data-uid"),I=h.attr("data-action");switch(I){case"toggleOwnership":c[x?"del":"put"](`/groups/${ajaxify.data.group.slug}/ownership/${w}`,{}).then(()=>{y.toggleClass("invisible")}).catch(l.error);break;case"kick":e.translate("[[groups:details.kick_confirm]]",function(k){g.confirm(k,function(R){R&&c.del(`/groups/${ajaxify.data.group.slug}/membership/${w}`,void 0).then(()=>u.slideUp().remove()).catch(l.error)})});break;case"update":t.update();break;case"delete":t.deleteGroup();break;case"join":c.put("/groups/"+ajaxify.data.group.slug+"/membership/"+(w||app.user.uid),void 0).then(()=>ajaxify.refresh()).catch(l.error);break;case"leave":c.del("/groups/"+ajaxify.data.group.slug+"/membership/"+(w||app.user.uid),void 0).then(()=>ajaxify.refresh()).catch(l.error);break;case"accept":c.put(`/groups/${ajaxify.data.group.slug}/pending/${w}`).then(()=>ajaxify.refresh()).catch(l.error);break;case"reject":c.del(`/groups/${ajaxify.data.group.slug}/pending/${w}`).then(()=>ajaxify.refresh()).catch(l.error);break;case"issueInvite":c.post(`/groups/${ajaxify.data.group.slug}/invites/${w}`).then(()=>ajaxify.refresh()).catch(l.error);break;case"acceptInvite":c.put(`/groups/${ajaxify.data.group.slug}/invites/${app.user.uid}`).then(()=>{w?u.remove():ajaxify.refresh()}).catch(l.error);break;case"rescindInvite":case"rejectInvite":c.del(`/groups/${ajaxify.data.group.slug}/invites/${w||app.user.uid}`).then(()=>{w?u.remove():ajaxify.refresh()}).catch(l.error);break;case"acceptAll":case"rejectAll":{const k=document.querySelector('[component="groups/pending"]');if(!k)return;const R=I==="acceptAll"?"put":"del";let P=Array.prototype.map.call(k.querySelectorAll("[data-uid]"),S=>parseInt(S.getAttribute("data-uid"),10));P=P.filter((S,j)=>P.indexOf(S)===j),Promise.all(P.map(async S=>c[R](`/groups/${ajaxify.data.group.slug}/pending/${S}`))).then(()=>{ajaxify.refresh()}).catch(l.error);break}}})},t.prepareSettings=function(){const p=m.get("groups/settings"),h=p.find('[name="labelColor"]'),u=p.find('[name="textColor"]'),y=p.find('[data-action="icon-select"]'),x=p.find(".badge"),w=p.find(".badge-text"),I=x.find("i"),k=p.find('[name="userTitle"]'),R=p.find('[name="userTitleEnabled"]'),P=p.find('[name="icon"]');h.on("input",function(){x.css("background-color",h.val())}),u.on("input",function(){x.css("color",u.val())}),y.on("click",function(){s.init(I,function(){P.val(I.val())})}),k.on("keyup",function(){w.translateText(k.val())}),R.on("change",function(){const j=m.get("groups/userTitleOption");this.checked?(j.removeAttr("disabled"),x.removeClass("hide")):(j.attr("disabled","disabled"),x.addClass("hide"))});const S=f.init($('.member-post-cids-selector [component="category-selector"]'),{onSelect:function(j){let T=($("#memberPostCids").val()||"").split(",").map(L=>parseInt(L,10));T.push(j.cid),T=T.filter((L,B,O)=>O.indexOf(L)===B),$("#memberPostCids").val(T.join(",")),S.selectCategory(0)}})},t.update=function(){const p=m.get("groups/settings"),h=p.find('input[type="checkbox"][name]');if(p.length){const u=p.serializeObject();Array.isArray(u.memberPostCids)||(u.memberPostCids=$("#memberPostCids").val()),h.each(function(y,x){x=$(x),x.length&&(u[x.attr("name")]=x.prop("checked"))}),c.put(`/groups/${ajaxify.data.group.slug}`,u).then(()=>{if(u.name!==ajaxify.data.group.name){let y=window.location.pathname;y=y.slice(1,y.lastIndexOf("/")+1),ajaxify.go(y+a(u.name))}l.success("[[groups:event.updated]]")}).catch(l.error)}},t.deleteGroup=function(){g.confirm("Are you sure you want to delete the group: "+utils.escapeHTML(i),function(p){p&&g.prompt("Please enter the name of this group in order to delete it:",function(h){h===i&&c.del(`/groups/${ajaxify.data.group.slug}`,{}).then(()=>{l.success("[[groups:event.deleted, "+utils.escapeHTML(i)+"]]"),ajaxify.go("groups")}).catch(l.error)})})};function r(){if(!ajaxify.data.group.isOwner)return;async function p(){const u=await c.get(`/api/groups/${ajaxify.data.group.slug}`),y=await app.parseAndTranslate("groups/details","group.invited",{group:u.group});$('[component="groups/invited"] tbody tr').remove(),$('[component="groups/invited"] tbody').html(y)}const h=$('[component="groups/members/invite"]');d.e(86193).then(function(){var u=[d(86193)];(function(y){y.user(h,function(x,w){c.post(`/groups/${ajaxify.data.group.slug}/invites/${w.item.user.uid}`).then(()=>p()).catch(l.error)})}).apply(null,u)}).catch(d.oe),$('[component="groups/members/bulk-invite-button"]').on("click",async()=>{let u=$('[component="groups/members/bulk-invite"]').val();if(!u)return!1;u=u.split(",").map(x=>a(x)),u=await Promise.all(u.map(x=>c.head(`/users/bySlug/${x}`).then(()=>x).catch(()=>!1))),u=u.filter(Boolean);const y=await Promise.all(u.map(x=>c.get(`/users/bySlug/${x}`).then(({uid:w})=>w)));await Promise.all(y.map(async x=>c.post(`/groups/${ajaxify.data.group.slug}/invites/${x}`))).then(()=>{p()}).catch(l.error)})}function v(){e.translate("[[groups:remove_group_cover_confirm]]",function(p){g.confirm(p,function(h){h&&socket.emit("groups.cover.remove",{groupName:ajaxify.data.group.name},function(u){u?l.error(u):ajaxify.refresh()})})})}return t}.apply(A,E),b!==void 0&&(D.exports=b)},24987:(D,A,d)=>{"use strict";var E,b;E=[d(74344),d(63281),d(7927)],b=function(C,s,m){const n={};let o,e;n.init=function(r){e=r||"groups/details",o=ajaxify.data.group.name,c(),f(),g()};function c(){$('[component="groups/members/add"]').on("click",function(){app.parseAndTranslate("admin/partials/groups/add-members",{},function(r){const v=[],p=s.dialog({title:"[[groups:details.add-member]]",message:r,buttons:{OK:{label:"[[groups:details.add-member]]",callback:function(){const h=[];p.find("[data-uid][data-selected]").each(function(u,y){h.push(v[$(y).attr("data-uid")])}),a(h,function(){p.modal("hide")})}}}});p.on("click","[data-username]",function(){$(this).attr("data-selected")==="1"?$(this).removeAttr("data-selected"):$(this).attr("data-selected",1),$(this).find("i").toggleClass("invisible")}),p.find("input").on("keyup",function(){C.get("/api/users",{query:$(this).val(),paginate:!1},function(h,u){if(h)return m.error(h);u.users.forEach(function(y){v[y.uid]=y}),app.parseAndTranslate("admin/partials/groups/add-members","users",{users:u.users},function(y){p.find("#search-result").html(y)})})})})})}function a(r,v){function p(){r=r.filter(function(u){return!$('[component="groups/members"] [data-uid="'+u.uid+'"]').length}),i(r,function(u){$('[component="groups/members"] tbody').prepend(u)}),v()}const h=r.map(function(u){return u.uid});o==="administrators"?socket.emit("admin.user.makeAdmins",h,function(u){if(u)return m.error(u);p()}):Promise.all(h.map(u=>C.put("/groups/"+ajaxify.data.group.slug+"/membership/"+u))).then(p).catch(m.error)}function f(){const r=$('[component="groups/members/search"]');r.on("keyup",utils.debounce(function(){const v=r.val();socket.emit("groups.searchMembers",{groupName:o,query:v},function(p,h){if(p)return m.error(p);i(h.users,function(u){$('[component="groups/members"] tbody').html(u),$('[component="groups/members"]').attr("data-nextstart",20)})})},250))}function g(){$('[component="groups/members"]').on("scroll",function(){const r=$(this),v=(r[0].scrollHeight-r.innerHeight())*.9;r.scrollTop()>v&&!$('[component="groups/members/search"]').val()&&l()})}function l(){const r=$('[component="groups/members"]');r.attr("loading")||(r.attr("loading",1),socket.emit("groups.loadMoreMembers",{groupName:o,after:r.attr("data-nextstart")},function(v,p){if(v)return m.error(v);p&&p.users.length?t(p.users,function(){r.removeAttr("loading"),r.attr("data-nextstart",p.nextStart)}):r.removeAttr("loading")}))}function t(r,v){r=r.filter(function(p){return!$('[component="groups/members"] [data-uid="'+p.uid+'"]').length}),i(r,function(p){$('[component="groups/members"] tbody').append(p),v()})}function i(r,v){app.parseAndTranslate(e,"group.members",{group:{members:r,isOwner:ajaxify.data.group.isOwner}},v)}return n}.apply(A,E),b!==void 0&&(D.exports=b)},74344:(D,A,d)=>{"use strict";d.r(A),d.d(A,{del:()=>l,get:()=>e,head:()=>c,patch:()=>f,post:()=>a,put:()=>g});var E=d(85233),b=d.n(E),C=d(63281),s=d.n(C);const m=config.relative_path+"/api/v3";function n(t,i){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:m+t.url,typeof i=="function"){o(t,i);return}return new Promise((r,v)=>{o(t,function(p,h){if(p)return p.message==="A valid login session was not found. Please log in and try again."?(0,C.confirm)("[[error:api.reauth-required]]",u=>{u&&ajaxify.go("login")}):v(p);r(h)})})}async function o(t,i){const{url:r}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,E.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const v=await fetch(r,t),{headers:p}=v,h=p.get("content-type"),u=h&&h.startsWith("application/json");let y;if(u?y=await v.json():y=await v.text(),!v.ok)return i(new Error(u?y.status.message:y));i(null,u&&y.hasOwnProperty("status")&&y.hasOwnProperty("response")?y.response:y)}function e(t,i,r){return n({url:t+(i&&Object.keys(i).length?"?"+$.param(i):"")},r)}function c(t,i,r){return n({url:t+(i&&Object.keys(i).length?"?"+$.param(i):""),method:"head"},r)}function a(t,i,r){return n({url:t,method:"post",data:i,headers:{"x-csrf-token":config.csrf_token}},r)}function f(t,i,r){return n({url:t,method:"patch",data:i,headers:{"x-csrf-token":config.csrf_token}},r)}function g(t,i,r){return n({url:t,method:"put",data:i,headers:{"x-csrf-token":config.csrf_token}},r)}function l(t,i,r){return n({url:t,method:"delete",data:i,headers:{"x-csrf-token":config.csrf_token}},r)}},22905:(D,A,d)=>{"use strict";var E,b;E=[d(7927),d(73138)],b=function(C,s){const m={};return m.init=function(n,o){let e=null;o=o||{},o.privilege=o.privilege||"topics:read",o.states=o.states||["watching","notwatching","ignoring"],o.cacheList=o.hasOwnProperty("cacheList")?o.cacheList:!0;let c=[];Array.isArray(o.localCategories)&&(c=o.localCategories.map(t=>({...t}))),o.selectedCids=o.selectedCids||ajaxify.data.selectedCids||[];const a=n.find('[component="category-selector-search"]');if(!a.length)return;const f=a.parent('[component="category/dropdown"]').length>0||a.parent('[component="category-selector"]').length>0;n.on("show.bs.dropdown",function(){f&&(n.find(".dropdown-toggle").css({visibility:"hidden"}),a.removeClass("hidden"),a.css({"z-index":n.find(".dropdown-toggle").css("z-index")+1}));function t(){const i=a.find("input").val();i.length>1||!i&&!e?g(i,function(r){e=o.cacheList&&(e||r),l(r)}):!i&&e&&l(e)}a.on("click",function(i){i.preventDefault(),i.stopPropagation()}),a.find("input").val("").on("keyup",utils.debounce(t,300)),t()}),n.on("shown.bs.dropdown",function(){["xs","sm"].includes(utils.findBootstrapEnvironment())||a.find("input").focus()}),n.on("hide.bs.dropdown",function(){f&&(n.find(".dropdown-toggle").css({visibility:"inherit"}),a.addClass("hidden")),a.off("click"),a.find("input").off("keyup")});function g(t,i){socket.emit("categories.categorySearch",{search:t,query:utils.params(),parentCid:o.parentCid||0,selectedCids:o.selectedCids,privilege:o.privilege,states:o.states,showLinks:o.showLinks},function(r,v){if(r)return C.error(r);i(c.concat(v))})}function l(t){const i=o.selectedCids.map(String);t.forEach(function(r){r.selected=i.includes(String(r.cid))}),app.parseAndTranslate(o.template,{categoryItems:t.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(r){n.find('[component="category/list"]').html(r.find('[component="category/list"]').html()),n.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!t.length);const v=s.Dropdown.getInstance(n.find(".dropdown-toggle").get(0));v&&v.update()})}},m}.apply(A,E),b!==void 0&&(D.exports=b)},50548:(D,A,d)=>{"use strict";var E,b;E=[d(22905),d(63281),d(85233),d(32230)],b=function(C,s,m,n){const o={};return o.init=function(e,c){if(!e||!e.length)return;c=c||{};const a=c.onSelect||function(){};c.states=c.states||["watching","notwatching","ignoring"],c.template=c.template||"partials/category/selector-dropdown-left",m.fire("action:category.selector.options",{el:e,options:c}),C.init(e,c);const f={el:e,selectedCategory:null};e.on("click","[data-cid]",function(){const l=$(this);return l.hasClass("disabled")?!1:(f.selectCategory(l.attr("data-cid")),a(f.selectedCategory))});let g=f.el.find('[component="category-selector-selected"]').html();return n.translate(g,l=>{g=l}),f.selectCategory=function(l){const t=f.el.find('[data-cid="'+l+'"]');f.selectedCategory={cid:l,name:t.attr("data-name")},t.length?f.el.find('[component="category-selector-selected"]').html(t.find('[component="category-markup"]').html()):f.el.find('[component="category-selector-selected"]').html(g)},f.getSelectedCategory=function(){return f.selectedCategory},f.getSelectedCid=function(){return f.selectedCategory?f.selectedCategory.cid:0},c.hasOwnProperty("selectedCategory")&&app.parseAndTranslate(c.template,{selectedCategory:c.selectedCategory},function(l){f.el.find('[component="category-selector-selected"]').html(l.find('[component="category-selector-selected"]').html())}),f},o.modal=function(e){e=e||{},e.onSelect=e.onSelect||function(){},e.onSubmit=e.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:e.message},function(c){const a=s.dialog({title:e.title||"[[modules:composer.select_category]]",message:c,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:g}}}),f=o.init(a.find('[component="category-selector"]'),e);function g(l){return l.preventDefault(),f.selectedCategory&&(e.onSubmit(f.selectedCategory),a.modal("hide")),!1}e.openOnLoad&&a.on("shown.bs.modal",function(){a.find(".dropdown-toggle").dropdown("toggle")}),a.find("form").on("submit",g)})},o}.apply(A,E),b!==void 0&&(D.exports=b)},38565:(D,A,d)=>{"use strict";var E,b;E=[d(7927),d(80034)],b=function(C){const s={coverEl:null,saveFn:null};s.init=function(n,o,e,c){s.coverEl=n,s.saveFn=o,n.find(".upload").on("click",e),n.find(".resize").on("click",function(){m(n)}),n.find(".remove").on("click",c),n.on("dragover",s.onDragOver).on("drop",s.onDrop),n.find(".save").on("click",s.save),n.addClass("initialised")},s.onDragOver=function(n){n.stopPropagation(),n.preventDefault(),n.originalEvent.dataTransfer.dropEffect="copy"},s.onDrop=function(n){n.stopPropagation(),n.preventDefault();const o=n.originalEvent.dataTransfer.files,e=new FileReader;o.length&&o[0].type.match("image.*")&&(e.onload=function(c){s.coverEl.css("background-image","url("+c.target.result+")"),s.newCover=c.target.result},e.readAsDataURL(o[0]),m(s.coverEl))};function m(n){n.toggleClass("active",1).backgroundDraggable({axis:"y",units:"percent"}),C.alert({alert_id:"drag_start",title:"[[modules:cover.dragging_title]]",message:"[[modules:cover.dragging_message]]",timeout:5e3})}return s.save=function(){s.coverEl.addClass("saving"),s.saveFn(s.newCover||void 0,s.coverEl.css("background-position"),function(n){n?C.error(n):(s.coverEl.toggleClass("active",0),s.coverEl.backgroundDraggable("disable"),s.coverEl.off("dragover",s.onDragOver),s.coverEl.off("drop",s.onDrop),C.success("[[modules:cover.saved]]")),s.coverEl.removeClass("saving")})},s}.apply(A,E),b!==void 0&&(D.exports=b)},98192:(D,A,d)=>{"use strict";var E,b;E=[d(7927)],b=function(C){const s={};s.show=function(e,c){const a=e.hasOwnProperty("fileSize")&&e.fileSize!==void 0?parseInt(e.fileSize,10):!1;app.parseAndTranslate("modals/upload-file",{showHelp:e.hasOwnProperty("showHelp")&&e.showHelp!==void 0?e.showHelp:!0,fileSize:a,title:e.title||"[[global:upload_file]]",description:e.description||"",button:e.button||"[[global:upload]]",accept:e.accept?e.accept.replace(/,/g,"&#44; "):""},function(f){f.modal("show"),f.on("hidden.bs.modal",function(){f.remove()});const g=f.find("#uploadForm");e.route&&g.attr("action",e.route),f.find("#fileUploadSubmitBtn").on("click",function(){return $(this).addClass("disabled"),e.uploadModal=f,o(e,c),!1})})},s.handleImageCrop=function(e,c){$("#crop-picture-modal").remove(),app.parseAndTranslate("modals/crop_picture",{url:utils.escapeHTML(e.url)},async function(a){a.modal({backdrop:"static"}).modal("show");const f=parseInt($(window).height()/2,10),g=document.getElementById("cropped-image");$(g).css("max-height",f);const l=(await d.e(31649).then(d.t.bind(d,33129,23))).default;let t=new l(g,{aspectRatio:e.aspectRatio,autoCropArea:1,viewMode:1,checkCrossOrigin:!0,cropmove:function(){e.restrictImageDimension&&(t.cropBoxData.width>e.imageDimension&&t.setCropBoxData({width:e.imageDimension}),t.cropBoxData.height>e.imageDimension&&t.setCropBoxData({height:e.imageDimension}))},ready:function(){if(!n(t,e))return a.modal("hide");if(e.restrictImageDimension){const i=g.width<g.height?g.width:g.height,r=i>e.imageDimension?e.imageDimension:i;t.setCropBoxData({width:r,height:r})}a.find(".rotate").on("click",function(){const i=this.getAttribute("data-degrees");t.rotate(i)}),a.find(".flip").on("click",function(){const i=this.getAttribute("data-option");this.getAttribute("data-method")==="scaleX"?t.scaleX(i):t.scaleY(i),this.setAttribute("data-option",i*-1)}),a.find(".reset").on("click",function(){t.reset()}),a.find(".crop-btn").on("click",function(){$(this).addClass("disabled");const i=n(t,e);i&&(a.find("#upload-progress-bar").css("width","0%"),a.find("#upload-progress-box").show().removeClass("hide"),m({data:e,imageData:i,progressBarEl:a.find("#upload-progress-bar")},function(r,v){if(r)return a.find("#upload-progress-box").hide(),a.find(".upload-btn").removeClass("disabled"),a.find(".crop-btn").removeClass("disabled"),C.error(r);c(v.url),a.modal("hide")}))}),a.find(".upload-btn").on("click",async function(){$(this).addClass("disabled"),t.destroy();const i=(await d.e(31649).then(d.t.bind(d,33129,23))).default;t=new i(g,{viewMode:1,autoCropArea:1,ready:function(){a.find(".crop-btn").trigger("click")}})})}})})};function m(e,c){const a={};a[e.data.paramName]=e.data.paramValue,a.method=e.data.socketMethod,a.size=e.imageData.length,a.progress=0;const f=1e5;function g(){const l=e.imageData.slice(a.progress,a.progress+f);socket.emit("uploads.upload",{chunk:l,params:a},function(t,i){if(t)return C.error(t);if(a.progress+f<a.size)return a.progress+=l.length,e.progressBarEl.css("width",(a.progress/a.size*100).toFixed(2)+"%"),setTimeout(g,100);e.progressBarEl.css("width","100%"),c(null,i)})}g()}function n(e,c){let a;try{a=c.imageType?e.getCroppedCanvas().toDataURL(c.imageType):e.getCroppedCanvas().toDataURL()}catch(f){["The operation is insecure.","Failed to execute 'toDataURL' on 'HTMLCanvasElement': Tainted canvases may not be exported."].indexOf(f.message)!==-1?C.error("[[error:cors-error]]"):C.error(f.message);return}return a}function o(e,c){function a(i,r){i==="error"&&e.uploadModal.find("#fileUploadSubmitBtn").removeClass("disabled"),e.uploadModal.find("#alert-"+i).translateText(r).removeClass("hide")}const f=e.uploadModal.find("#fileInput");if(!f.val())return a("error","[[uploads:select-file-to-upload]]");const g=f[0].files[0],l=e.hasOwnProperty("fileSize")&&e.fileSize!==void 0?parseInt(e.fileSize,10):!1;if(l&&g.size>l*1024)return a("error","[[error:file-too-big, "+l+"]]");if(g.name.endsWith(".gif")){d.e(3564).then(function(){var i=[d(50431)];(function(r){r.ajaxSubmit(e.uploadModal,c)}).apply(null,i)}).catch(d.oe);return}const t=new FileReader;t.addEventListener("load",function(){const i=t.result;e.uploadModal.modal("hide"),s.handleImageCrop({url:i,imageType:g.type,socketMethod:e.socketMethod,aspectRatio:e.aspectRatio,allowSkippingCrop:e.allowSkippingCrop,restrictImageDimension:e.restrictImageDimension,imageDimension:e.imageDimension,paramName:e.paramName,paramValue:e.paramValue},c)},!1),g&&t.readAsDataURL(g)}return s}.apply(A,E),b!==void 0&&(D.exports=b)},22568:(D,A,d)=>{"use strict";var E,b,C;(function(s){b=[d(20648)],E=s,C=typeof E=="function"?E.apply(A,b):E,C!==void 0&&(D.exports=C)})(function(s){const m=s("[^\\p{L}\\s\\d\\-_]","g"),n=/[^\w\s\d\-_]/g,o=/^\s+|\s+$/g,e=/\s+/g,c=/-+/g,a=/-$/g,f=/^-/g,g=/^[\w\d\s.,\-@]+$/;return function(t,i){return t?(t=String(t).replace(o,""),g.test(t)?t=t.replace(n,"-"):t=s.replace(t,m,"-"),t=i?t:t.toLocaleLowerCase(),t=t.replace(e,"-"),t=t.replace(c,"-"),t=t.replace(a,""),t=t.replace(f,""),t):""}})},80034:()=>{(function(D){var A=D(window),d=function(s,m,n,o){if(arguments.length===3||o){if(n<s)return s;if(n>m)return m}return n},E=function(s){s.clientX=s.originalEvent.touches[0].clientX,s.clientY=s.originalEvent.touches[0].clientY},b=function(s){var m=(s.css("background-image").match(/^url\(['"]?(.*?)['"]?\)$/i)||[])[1];if(m){var n={width:0,height:0},o=new Image;return o.onload=function(){if(s.css("background-size")=="cover"){var e=s.innerWidth(),c=s.innerHeight(),a=e/c;imageAspectRatio=o.width/o.height,scale=1,imageAspectRatio>=a?scale=c/o.height:scale=e/o.width,n.width=o.width*scale,n.height=o.height*scale}else n.width=o.width,n.height=o.height},o.src=m,n}};function C(s,m){this.element=s,this.options=m,this.init()}C.prototype.init=function(){var s=D(this.element),m=(s.css("background-image").match(/^url\(['"]?(.*?)['"]?\)$/i)||[])[1],n=this.options;if(m){var o={width:0,height:0};(n.bound||n.units=="percent")&&(o=b(s)),s.on("mousedown.dbg touchstart.dbg",function(e){if(e.target===s[0]){if(e.preventDefault(),e.originalEvent.touches)E(e);else if(e.which!==1)return;var c=e.clientX,a=e.clientY,f=s.css("background-position").match(/(-?\d+).*?\s(-?\d+)/)||[],g=parseInt(f[1])||0,l=parseInt(f[2])||0;n.units=="percent"&&(g=Math.round(g/-200*o.width),l=Math.round(l/-200*o.height)),A.on("mousemove.dbg touchmove.dbg",function(t){t.preventDefault(),t.originalEvent.touches&&E(t);var i=t.clientX,r=t.clientY;n.units=="percent"?(g=n.axis==="y"?g:d(-o.width/2,0,g+i-c,n.bound),l=n.axis==="x"?l:d(-o.height/2,0,l+r-a,n.bound),s.css("background-position",g/o.width*-200+"% "+l/o.height*-200+"%")):(g=n.axis==="y"?g:d(s.innerWidth()-o.width,0,g+i-c,n.bound),l=n.axis==="x"?l:d(s.innerHeight()-o.height,0,l+r-a,n.bound),s.css("background-position",g+"px "+l+"px")),c=i,a=r}),A.on("mouseup.dbg touchend.dbg mouseleave.dbg",function(){n.done&&n.done(),A.off("mousemove.dbg touchmove.dbg"),A.off("mouseup.dbg touchend.dbg mouseleave.dbg")})}})}},C.prototype.disable=function(){var s=D(this.element);s.off("mousedown.dbg touchstart.dbg"),A.off("mousemove.dbg touchmove.dbg mouseup.dbg touchend.dbg mouseleave.dbg")},D.fn.backgroundDraggable=function(m){var m=m,n=Array.prototype.slice.call(arguments,1);return this.each(function(){var o=D(this);if(typeof m>"u"||typeof m=="object"){m=D.extend({},D.fn.backgroundDraggable.defaults,m);var e=new C(this,m);o.data("dbg",e)}else if(typeof m=="string"&&o.data("dbg")){var e=o.data("dbg");C.prototype[m].apply(e,n)}})},D.fn.backgroundDraggable.defaults={bound:!0,axis:void 0,units:"pixels"}})(jQuery)}}]);
