"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[32502,70565,83014,99617,11383,74344,53094],{53094:(j,x,f)=>{var h,g;h=[f(7237),f(3547),f(32230),f(7927),f(74344)],g=function(E,o,_,r,y){const P={};let i,u,d;P.init=function(e){i||(d=ajaxify.data.tid,app.parseAndTranslate("modals/move-post",{},function(s){i=s,u=i.find("#move_posts_confirm"),$("body").append(i),i.find("#move_posts_cancel").on("click",v),i.find("#topicId").on("keyup",utils.debounce(n,200)),o.init(a),t(),e&&o.togglePostSelection(e,e.attr("data-pid")),$(window).off("action:ajaxify.end",c).on("action:ajaxify.end",c),u.on("click",function(){const l=p();if(!l)return;u.attr("disabled",!0);const k={pids:o.pids.slice(),tid:l};if(config.undoTimeout>0)return r.alert({alert_id:"pids_move_"+o.pids.join("-"),title:"[[topic:thread_tools.move-posts]]",message:"[[topic:topic_move_posts_success]]",type:"success",timeout:config.undoTimeout,timeoutfn:function(){m(k)},clickfn:function(I,A){delete A.timeoutfn,r.success("[[topic:topic_move_posts_undone]]"),u.removeAttr("disabled")}});m(k)})}))};function c(){if(!i)return;const e=i.find("#topicId");let s=null;ajaxify.data.template.topic&&ajaxify.data.tid&&parseInt(ajaxify.data.tid,10)!==d&&(s=ajaxify.data.tid),s&&e.val(s),n()}function p(){const e=i.find("#topicId");return e.length&&e.val()?e.val():ajaxify.data.template.topic&&ajaxify.data.tid}function t(){if(!i)return;const e=p();o.pids.length?e&&parseInt(e,10)!==parseInt(d,10)?y.get("/topics/"+e,{}).then(function(s){if(!s||!s.tid)return r.error("[[error:no-topic]]");if(s.scheduled)return r.error("[[error:cant-move-posts-to-scheduled]]");const l=_.compile("topic:x-posts-will-be-moved-to-y",o.pids.length,s.title);i.find("#pids").translateHtml(l)}):i.find("#pids").translateHtml("[[topic:x-posts-selected, "+o.pids.length+"]]"):i.find("#pids").translateHtml("[[topic:no-posts-selected]]")}function n(){if(!i)return;const e=p();o.pids.length&&e&&parseInt(e,10)!==parseInt(d,10)?u.removeAttr("disabled"):u.attr("disabled",!0),t()}function a(){n()}function m(e){e.tid&&Promise.all(e.pids.map(s=>y.put(`/posts/${s}/move`,{tid:e.tid}))).then(()=>{e.pids.forEach(function(s){E.get("post","pid",s).fadeOut(500,function(){$(this).remove()})}),e.pids.length===1&&ajaxify.data.template.topic&&parseInt(e.tid,10)===parseInt(ajaxify.data.tid,10)&&ajaxify.go(`/post/${e.pids[0]}`),v()}).catch(r.error)}function v(){i&&(i.remove(),i=null,o.disable(),$(window).off("action:ajaxify.end",c))}return P}.apply(x,h),g!==void 0&&(j.exports=g)},74344:(j,x,f)=>{f.r(x),f.d(x,{del:()=>p,get:()=>P,head:()=>i,patch:()=>d,post:()=>u,put:()=>c});var h=f(85233),g=f.n(h),E=f(63281),o=f.n(E);const _=config.relative_path+"/api/v3";function r(t,n){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:_+t.url,typeof n=="function"){y(t,n);return}return new Promise((a,m)=>{y(t,function(v,e){if(v)return v.message==="A valid login session was not found. Please log in and try again."?(0,E.confirm)("[[error:api.reauth-required]]",s=>{s&&ajaxify.go("login")}):m(v);a(e)})})}async function y(t,n){const{url:a}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,h.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const m=await fetch(a,t),{headers:v}=m,e=v.get("content-type"),s=e&&e.startsWith("application/json");let l;if(s?l=await m.json():l=await m.text(),!m.ok)return n(new Error(s?l.status.message:l));n(null,s&&l.hasOwnProperty("status")&&l.hasOwnProperty("response")?l.response:l)}function P(t,n,a){return r({url:t+(n&&Object.keys(n).length?"?"+$.param(n):"")},a)}function i(t,n,a){return r({url:t+(n&&Object.keys(n).length?"?"+$.param(n):""),method:"head"},a)}function u(t,n,a){return r({url:t,method:"post",data:n,headers:{"x-csrf-token":config.csrf_token}},a)}function d(t,n,a){return r({url:t,method:"patch",data:n,headers:{"x-csrf-token":config.csrf_token}},a)}function c(t,n,a){return r({url:t,method:"put",data:n,headers:{"x-csrf-token":config.csrf_token}},a)}function p(t,n,a){return r({url:t,method:"delete",data:n,headers:{"x-csrf-token":config.csrf_token}},a)}},3547:(j,x,f)=>{var h,g;h=[f(7237)],g=function(E){const o={};let _;o.pids=[];let r=!1;o.init=function(d,c){o.pids.length=0,_=d,c=c||{},r=c.allowMainPostSelect||!1,$("#content").on("click",'[component="topic"] [component="post"]',y),i()};function y(d){d.stopPropagation();const c=$(this).attr("data-pid"),p=$('[component="topic"] [data-pid="'+c+'"]');!r&&parseInt($(this).attr("data-index"),10)===0||o.togglePostSelection(p,c)}o.disable=function(){o.pids.forEach(function(d){E.get("post","pid",d).toggleClass("selected",!1)}),$("#content").off("click",'[component="topic"] [component="post"]',y),u()},o.togglePostSelection=function(d,c){if(c){const p=o.pids.indexOf(c);p===-1?(o.pids.push(c),d.toggleClass("selected",!0)):(o.pids.splice(p,1),d.toggleClass("selected",!1)),o.pids.length&&o.pids.sort(function(t,n){return t-n}),typeof _=="function"&&_()}};function P(){return!1}function i(){$("#content").on("click",'[component="post"] button, [component="post"] a',P)}function u(){$("#content").off("click",'[component="post"] button, [component="post"] a',P)}return o}.apply(x,h),g!==void 0&&(j.exports=g)}}]);
