"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[84745,70565,83014,99617,74344],{85925:(P,p,a)=>{var d,g;d=[a(7237),a(74344),a(7927)],g=function(i,_,v){const c={};let o=[];c.init=function(n){n=n||{},o.length=0,i.get("chat/search").on("keyup",utils.debounce(C,250));const r=$('[component="chat/search/list"]');r.on("click","[data-uid]",function(){n.onSelect&&n.onSelect(o.find(e=>parseInt(e.uid,10)===parseInt($(this).attr("data-uid"),10))),m(r)})};function m(n){i.get("chat/search").val(""),y(n),n.find('[component="chat/search/no-users"]').addClass("hidden"),n.find('[component="chat/search/start-typing"]').removeClass("hidden")}function C(){const n=$('[component="chat/search/list"]'),r=i.get("chat/search").val();if(!r)return m(n);n.find('[component="chat/search/start-typing"]').addClass("hidden"),_.get("/api/users",{query:r,searchBy:"username",paginate:!1}).then(O).catch(v.error)}function y(n){o.length=0,n.find("[data-uid]").remove()}async function O(n){const r=$('[component="chat/search/list"]');if(y(r),n.users=n.users.filter(function(t){return parseInt(t.uid,10)!==parseInt(app.user.uid,10)}),o=n.users,!n.users.length)return r.find('[component="chat/search/no-users"]').removeClass("hidden");r.find('[component="chat/search/no-users"]').addClass("hidden");const e=await app.parseAndTranslate("modals/create-room","searchUsers",{searchUsers:n.users});r.append(e),r.parent().toggleClass("show",!0)}return c}.apply(p,d),g!==void 0&&(P.exports=g)},74344:(P,p,a)=>{a.r(p),a.d(p,{del:()=>r,get:()=>m,head:()=>C,patch:()=>O,post:()=>y,put:()=>n});var d=a(85233),g=a.n(d),i=a(63281),_=a.n(i);const v=config.relative_path+"/api/v3";function c(e,t){if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:v+e.url,typeof t=="function"){o(e,t);return}return new Promise((s,h)=>{o(e,function(l,E){if(l)return l.message==="A valid login session was not found. Please log in and try again."?(0,i.confirm)("[[error:api.reauth-required]]",f=>{f&&ajaxify.go("login")}):h(l);s(E)})})}async function o(e,t){const{url:s}=e;delete e.url,e.data&&!(e.data instanceof FormData)&&(e.data=JSON.stringify(e.data||{}),e.headers["content-type"]="application/json; charset=utf-8"),{options:e}=await(0,d.fire)("filter:api.options",{options:e}),e.data&&(e.body=e.data,delete e.data);const h=await fetch(s,e),{headers:l}=h,E=l.get("content-type"),f=E&&E.startsWith("application/json");let u;if(f?u=await h.json():u=await h.text(),!h.ok)return t(new Error(f?u.status.message:u));t(null,f&&u.hasOwnProperty("status")&&u.hasOwnProperty("response")?u.response:u)}function m(e,t,s){return c({url:e+(t&&Object.keys(t).length?"?"+$.param(t):"")},s)}function C(e,t,s){return c({url:e+(t&&Object.keys(t).length?"?"+$.param(t):""),method:"head"},s)}function y(e,t,s){return c({url:e,method:"post",data:t,headers:{"x-csrf-token":config.csrf_token}},s)}function O(e,t,s){return c({url:e,method:"patch",data:t,headers:{"x-csrf-token":config.csrf_token}},s)}function n(e,t,s){return c({url:e,method:"put",data:t,headers:{"x-csrf-token":config.csrf_token}},s)}function r(e,t,s){return c({url:e,method:"delete",data:t,headers:{"x-csrf-token":config.csrf_token}},s)}}}]);
