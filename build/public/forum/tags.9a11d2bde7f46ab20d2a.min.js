"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[86291,53375],{25142:(w,v,g)=>{var p,u;p=[g(85233),g(7927)],u=function(h,d){const a={};let f,c=0,t=!1,o,s=0;a.init=function(n,l){const e=$("body");typeof n=="function"?(f=n,o=e):(f=l,o=n||e),c=$(window).scrollTop(),$(window).off("scroll",_).on("scroll",_),e.height()<=$(window).height()&&f(1)};function _(){s&&clearTimeout(s),s=setTimeout(function(){s=0,A()},60)}function A(){const n=utils.findBootstrapEnvironment(),l=(n==="xs"||n==="sm")&&$("html").hasClass("composing");if(t||l||app.flags._glance)return;const e=$(window).scrollTop(),r=$(window).height(),i=o.height()-r,m=o.offset()?o.offset().top:0,T=100*(e-m)/(i<=0?r:i),M=15,D=85,E=e>c?1:-1;(T<M&&e<c||T>D&&e>c||T<0&&E>0&&i<0)&&f(E),c=e}return a.loadMore=function(n,l,e){if(t)return;t=!0;const r={method:n,data:l};h.fire("action:infinitescroll.loadmore",r),socket.emit(r.method,r.data,function(i,m){if(i)return t=!1,d.error(i);e(m,function(){t=!1})})},a.loadMoreXhr=function(n,l){if(t)return;t=!0;const e=config.relative_path+"/api"+location.pathname.replace(new RegExp("^"+config.relative_path),""),r={url:e,data:n};h.fire("action:infinitescroll.loadmore.xhr",r),$.get(e,n,function(i){l(i,function(){t=!1})}).fail(function(i){t=!1,d.error(String(i.responseJSON||"[[error:no-connection]]"))})},a.removeExtra=function(n,l,e){let r=$();if(n.length<=e)return r;const i=n.length-e;if(l>0){const m=$(document).height(),T=$(window).scrollTop();r=n.slice(0,i).remove(),$(window).scrollTop(T+($(document).height()-m))}else r=n.slice(n.length-i).remove();return r},a}.apply(v,p),u!==void 0&&(w.exports=u)},21764:(w,v,g)=>{var p,u;p=[g(25142),g(7927)],u=function(h,d){const a={};a.init=function(){app.enterRoom("tags"),$("#tag-search").on("input propertychange",utils.debounce(function(){if(!$("#tag-search").val().length)return f();socket.emit("topics.searchAndLoadTags",{query:$("#tag-search").val()},function(t,o){if(t)return d.error(t);c(o.tags,!0)})},250)),h.init(a.loadMoreTags)},a.loadMoreTags=function(t){t<0||!$(".tag-list").length||$("#tag-search").val()||h.loadMore("topics.loadMoreTags",{after:$(".tag-list").attr("data-nextstart")},function(o,s){o&&o.tags&&o.tags.length?(c(o.tags,!1,s),$(".tag-list").attr("data-nextstart",o.nextStart)):s()})};function f(){socket.emit("topics.loadMoreTags",{after:0},function(t,o){if(t)return d.error(t);c(o.tags,!0)})}function c(t,o,s){s=s||function(){},app.parseAndTranslate("tags","tags",{tags:t},function(_){$(".tag-list")[o?"html":"append"](_),s()})}return a}.apply(v,p),u!==void 0&&(w.exports=u)}}]);
