"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[23692],{93318:(p,m,i)=>{var c,u;c=[i(59494),i(94039),i(32230),i(74344),i(85233),i(63281),i(7927)],u=function(h,g,f,s,y,A,o){const l={};l.init=function(){h.init(),$("#submitBtn").on("click",b),ajaxify.data.groupTitleArray.length===1&&ajaxify.data.groupTitleArray[0]===""&&$('#groupTitle option[value=""]').attr("selected",!0),x(),C(),v(),T(),j()};function b(){const t=$('form[component="profile/edit/form"]').serializeObject();return t.uid=ajaxify.data.uid,t.groupTitle=t.groupTitle||"",t.groupTitle=JSON.stringify(Array.isArray(t.groupTitle)?t.groupTitle:[t.groupTitle]),y.fire("action:profile.update",t),s.put("/users/"+t.uid,t).then(n=>{o.success("[[user:profile_update_success]]"),n.picture&&$("#user-current-picture").attr("src",n.picture),g.updateHeader(n.picture)}).catch(o.error),!1}function x(){$("#deleteAccountBtn").on("click",function(){return f.translate("[[user:delete_account_confirm]]",function(t){const n=A.confirm(t+'<p><input type="password" class="form-control" id="confirm-password" /></p>',function(r){if(!r)return;const e=n.find(".btn-primary");return e.html('<i class="fa fa-spinner fa-spin"></i>'),e.prop("disabled",!0),s.del(`/users/${ajaxify.data.uid}/account`,{password:$("#confirm-password").val()},function(d){function L(){f.translate("[[modules:bootbox.confirm]]",function(E){e.text(E),e.prop("disabled",!1)})}if(d)return L(),o.error(d);e.html('<i class="fa fa-check"></i>'),window.location.href=`${config.relative_path}/`}),!1});n.on("shown.bs.modal",function(){n.find("input").focus()})}),!1})}function C(){$("#confirm-email").on("click",function(){const t=$(this).attr("disabled",!0);socket.emit("user.emailConfirm",{},function(n){if(t.removeAttr("disabled"),n)return o.error(n);o.success("[[notifications:email-confirm-sent]]")})})}function a(t,n){return t.length?"("+t.val().length+"/"+n+")":""}function v(){const t=$("#signature");$("#signatureCharCountLeft").html(a(t,ajaxify.data.maximumSignatureLength)),t.on("keyup change",function(){$("#signatureCharCountLeft").html(a(t,ajaxify.data.maximumSignatureLength))})}function T(){const t=$("#aboutme");$("#aboutMeCharCountLeft").html(a(t,ajaxify.data.maximumAboutMeLength)),t.on("keyup change",function(){$("#aboutMeCharCountLeft").html(a(t,ajaxify.data.maximumAboutMeLength))})}function j(){function t(n){const r=$("#groupTitle").val();if(!ajaxify.data.allowMultipleBadges||Array.isArray(r)&&r.length>1)return;const e=$("#groupTitle").find(":selected");e.length&&e.val()&&(n>0?e.insertAfter(e.next()):e.prev().val()&&e.insertBefore(e.prev()))}$('[component="group/order/up"]').on("click",function(){t(-1)}),$('[component="group/order/down"]').on("click",function(){t(1)})}return l}.apply(m,c),u!==void 0&&(p.exports=u)}}]);
