"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[53375],{25142:(E,_,m)=>{var g,d;g=[m(85233),m(7927)],d=function(w,T){const l={};let c,s=0,i=!1,f,h=0;l.init=function(o,r){const t=$("body");typeof o=="function"?(c=o,f=t):(c=r,f=o||t),s=$(window).scrollTop(),$(window).off("scroll",v).on("scroll",v),t.height()<=$(window).height()&&c(1)};function v(){h&&clearTimeout(h),h=setTimeout(function(){h=0,b()},60)}function b(){const o=utils.findBootstrapEnvironment(),r=(o==="xs"||o==="sm")&&$("html").hasClass("composing");if(i||r||app.flags._glance)return;const t=$(window).scrollTop(),n=$(window).height(),e=f.height()-n,a=f.offset()?f.offset().top:0,u=100*(t-a)/(e<=0?n:e),C=15,S=85,p=t>s?1:-1;(u<C&&t<s||u>S&&t>s||u<0&&p>0&&e<0)&&c(p),s=t}return l.loadMore=function(o,r,t){if(i)return;i=!0;const n={method:o,data:r};w.fire("action:infinitescroll.loadmore",n),socket.emit(n.method,n.data,function(e,a){if(e)return i=!1,T.error(e);t(a,function(){i=!1})})},l.loadMoreXhr=function(o,r){if(i)return;i=!0;const t=config.relative_path+"/api"+location.pathname.replace(new RegExp("^"+config.relative_path),""),n={url:t,data:o};w.fire("action:infinitescroll.loadmore.xhr",n),$.get(t,o,function(e){r(e,function(){i=!1})}).fail(function(e){i=!1,T.error(String(e.responseJSON||"[[error:no-connection]]"))})},l.removeExtra=function(o,r,t){let n=$();if(o.length<=t)return n;const e=o.length-t;if(r>0){const a=$(document).height(),u=$(window).scrollTop();n=o.slice(0,e).remove(),$(window).scrollTop(u+($(document).height()-a))}else n=o.slice(o.length-e).remove();return n},l}.apply(_,g),d!==void 0&&(E.exports=d)}}]);
