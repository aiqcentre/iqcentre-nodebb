"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[81018],{81018:(r,l,o)=>{var i,a;i=[o(7927),o(74344),o(93216)],a=function(h,m,d){const s={};s.init=function(){Promise.all([o.e(42441),o.e(61006),o.e(46862),o.e(54271)]).then(function(){var n=[o(30524)];(function(e){$('[component="chat/nav-wrapper"]').on("click",'[component="chat/recent/room"], [component="chat/public/room"]',function(t){t.stopPropagation(),t.preventDefault();const c=this.getAttribute("data-roomid");e.switchChat(c)}).on("click",".mark-read",function(t){t.stopPropagation();const c=this.closest("[data-roomid]");d.toggleReadState(c)}),$('[component="chat/recent"]').on("scroll",utils.debounce(function(){const t=$(this),c=(t[0].scrollHeight-t.height())*.9;t.scrollTop()>c&&f()},100))}).apply(null,n)}).catch(o.oe)};function f(){const n=$('[component="chat/recent"]');n.attr("loading")||(n.attr("loading",1),socket.emit("modules.chats.getRecentChats",{uid:ajaxify.data.uid,after:n.attr("data-nextstart")},function(e,t){if(e)return h.error(e);t&&t.rooms.length?u(t,function(){n.removeAttr("loading"),n.attr("data-nextstart",t.nextStart)}):n.removeAttr("loading")}))}function u(n,e){if(!n.rooms.length)return e();n.loadingMore=!0,app.parseAndTranslate("chats","rooms",n,function(t){$('[component="chat/recent"]').append(t),t.find(".timeago").timeago(),e()})}return s}.apply(l,i),a!==void 0&&(r.exports=a)}}]);
