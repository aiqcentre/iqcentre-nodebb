(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[49915,66623,49286,12160,54625],{22905:(u,p,d)=>{"use strict";var y,m;y=[d(7927),d(73138)],m=function(C,g){const o={};return o.init=function(c,i){let t=null;i=i||{},i.privilege=i.privilege||"topics:read",i.states=i.states||["watching","notwatching","ignoring"],i.cacheList=i.hasOwnProperty("cacheList")?i.cacheList:!0;let s=[];Array.isArray(i.localCategories)&&(s=i.localCategories.map(n=>({...n}))),i.selectedCids=i.selectedCids||ajaxify.data.selectedCids||[];const r=c.find('[component="category-selector-search"]');if(!r.length)return;const e=r.parent('[component="category/dropdown"]').length>0||r.parent('[component="category-selector"]').length>0;c.on("show.bs.dropdown",function(){e&&(c.find(".dropdown-toggle").css({visibility:"hidden"}),r.removeClass("hidden"),r.css({"z-index":c.find(".dropdown-toggle").css("z-index")+1}));function n(){const f=r.find("input").val();f.length>1||!f&&!t?l(f,function(h){t=i.cacheList&&(t||h),a(h)}):!f&&t&&a(t)}r.on("click",function(f){f.preventDefault(),f.stopPropagation()}),r.find("input").val("").on("keyup",utils.debounce(n,300)),n()}),c.on("shown.bs.dropdown",function(){["xs","sm"].includes(utils.findBootstrapEnvironment())||r.find("input").focus()}),c.on("hide.bs.dropdown",function(){e&&(c.find(".dropdown-toggle").css({visibility:"inherit"}),r.addClass("hidden")),r.off("click"),r.find("input").off("keyup")});function l(n,f){socket.emit("categories.categorySearch",{search:n,query:utils.params(),parentCid:i.parentCid||0,selectedCids:i.selectedCids,privilege:i.privilege,states:i.states,showLinks:i.showLinks},function(h,v){if(h)return C.error(h);f(s.concat(v))})}function a(n){const f=i.selectedCids.map(String);n.forEach(function(h){h.selected=f.includes(String(h.cid))}),app.parseAndTranslate(i.template,{categoryItems:n.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(h){c.find('[component="category/list"]').html(h.find('[component="category/list"]').html()),c.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!n.length);const v=g.Dropdown.getInstance(c.find(".dropdown-toggle").get(0));v&&v.update()})}},o}.apply(p,y),m!==void 0&&(u.exports=m)},50548:(u,p,d)=>{"use strict";var y,m;y=[d(22905),d(63281),d(85233),d(32230)],m=function(C,g,o,c){const i={};return i.init=function(t,s){if(!t||!t.length)return;s=s||{};const r=s.onSelect||function(){};s.states=s.states||["watching","notwatching","ignoring"],s.template=s.template||"partials/category/selector-dropdown-left",o.fire("action:category.selector.options",{el:t,options:s}),C.init(t,s);const e={el:t,selectedCategory:null};t.on("click","[data-cid]",function(){const a=$(this);return a.hasClass("disabled")?!1:(e.selectCategory(a.attr("data-cid")),r(e.selectedCategory))});let l=e.el.find('[component="category-selector-selected"]').html();return c.translate(l,a=>{l=a}),e.selectCategory=function(a){const n=e.el.find('[data-cid="'+a+'"]');e.selectedCategory={cid:a,name:n.attr("data-name")},n.length?e.el.find('[component="category-selector-selected"]').html(n.find('[component="category-markup"]').html()):e.el.find('[component="category-selector-selected"]').html(l)},e.getSelectedCategory=function(){return e.selectedCategory},e.getSelectedCid=function(){return e.selectedCategory?e.selectedCategory.cid:0},s.hasOwnProperty("selectedCategory")&&app.parseAndTranslate(s.template,{selectedCategory:s.selectedCategory},function(a){e.el.find('[component="category-selector-selected"]').html(a.find('[component="category-selector-selected"]').html())}),e},i.modal=function(t){t=t||{},t.onSelect=t.onSelect||function(){},t.onSubmit=t.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:t.message},function(s){const r=g.dialog({title:t.title||"[[modules:composer.select_category]]",message:s,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:l}}}),e=i.init(r.find('[component="category-selector"]'),t);function l(a){return a.preventDefault(),e.selectedCategory&&(t.onSubmit(e.selectedCategory),r.modal("hide")),!1}t.openOnLoad&&r.on("shown.bs.modal",function(){r.find(".dropdown-toggle").dropdown("toggle")}),r.find("form").on("submit",l)})},i}.apply(p,y),m!==void 0&&(u.exports=m)},44541:(u,p,d)=>{u.exports=d(35127)},2585:(u,p,d)=>{u.exports=d(61006)},98755:(u,p,d)=>{u.exports=d(77678)},98166:(u,p,d)=>{u.exports=d(73398)},88186:(u,p,d)=>{u.exports=d(13720)},22143:(u,p,d)=>{u.exports=d(77070)},44882:(u,p,d)=>{"use strict";var y,m;y=[d(63281),d(32230),d(66603),d(7927),d(85233)],m=function(C,g,o,c,i){const t={};let s,r;t.show=function(){i.one("action:ajaxify.end",()=>{l(),e(),t.showEmailConfirmWarning()})},t.showEmailConfirmWarning=function(a){if(!config.emailPrompt||!app.user.uid||parseInt(o.getItem("email-confirm-dismiss"),10)===1)return;const n={alert_id:"email_confirm",type:"warning",timeout:0,closefn:()=>{o.setItem("email-confirm-dismiss",1)}};!app.user.email&&!app.user.isEmailConfirmSent?(n.message="[[error:no-email-to-confirm]]",n.clickfn=function(){c.remove("email_confirm"),ajaxify.go("user/"+app.user.userslug+"/edit/email")},c.alert(n)):!app.user["email:confirmed"]&&!app.user.isEmailConfirmSent?(n.message=a||"[[error:email-not-confirmed]]",n.clickfn=function(){c.remove("email_confirm"),ajaxify.go("/me/edit/email")},c.alert(n)):!app.user["email:confirmed"]&&app.user.isEmailConfirmSent&&(n.message="[[error:email-not-confirmed-email-sent]]",c.alert(n))};function e(){!config.cookies.enabled||!navigator.cookieEnabled||app.inAdmin||o.getItem("cookieconsent")==="1"||(config.cookies.message=g.unescape(config.cookies.message),config.cookies.dismiss=g.unescape(config.cookies.dismiss),config.cookies.link=g.unescape(config.cookies.link),config.cookies.link_url=g.unescape(config.cookies.link_url),app.parseAndTranslate("partials/cookie-consent",config.cookies,function(a){$(document.body).append(a),$(document.body).addClass("cookie-consent-open");const n=$(".cookie-consent");n.find("button").on("click",function(){o.setItem("cookieconsent","1"),n.remove(),$(document.body).removeClass("cookie-consent-open")})}))}function l(){const a=utils.params({full:!0});s=a.has("loggedin"),r=a.get("register"),s&&(c.alert({type:"success",title:"[[global:welcome_back]] "+app.user.username+"!",message:"[[global:you_have_successfully_logged_in]]",timeout:5e3}),a.delete("loggedin")),r&&(C.alert({message:utils.escapeHTML(decodeURIComponent(r))}),a.delete("register")),a.has("lang")&&a.get("lang")===config.defaultLang&&(console.info(`The "lang" parameter was passed in to set the language to "${a.get("lang")}", but that is already the forum default language.`),a.delete("lang"));const n=a.toString();ajaxify.updateHistory(ajaxify.currentPage+(n?`?${n}`:"")+document.location.hash,!0)}return t.showInvalidSession=function(){C.alert({title:"[[error:invalid-session]]",message:"[[error:invalid-session-text]]",closeButton:!1,callback:function(){window.location.reload()}})},t.showSessionMismatch=function(){C.alert({title:"[[error:session-mismatch]]",message:"[[error:session-mismatch-text]]",closeButton:!1,callback:function(){window.location.reload()}})},t}.apply(p,y),m!==void 0&&(u.exports=m)},75203:(u,p,d)=>{"use strict";var y;y=function(){const m={};return m.apply=function(C){$(C).on("mousewheel",function(g){const o=this.scrollTop,c=this.scrollHeight,i=Math.round(this.getBoundingClientRect().height);if(g.originalEvent.deltaY<0&&o===0||g.originalEvent.deltaY>0&&i+o>=c)return!1})},m}.call(p,d,p,u),y!==void 0&&(u.exports=y)},7073:(u,p,d)=>{"use strict";var y,m;y=[d(32230),d(66603),d(85233),d(7927),d(73138)],m=function(C,g,o,c,i){const t={current:{}};t.init=function(e){if(!config.searchEnabled)return;e=e||{in:config.searchDefaultInQuick||"titles"},$('[component="search/form"]').each((a,n)=>{s($(n),e)})};function s(e,l){const a=e.find('[component="search/button"]'),n=e.find('[component="search/fields"]'),f=n.find('input[name="query"]'),h=n.find("#quick-search-container"),v=n.hasClass("hidden");e.find(".advanced-search-link").off("mousedown").on("mousedown",function(){ajaxify.go("/search")}),v&&f.off("blur").on("blur",function(){setTimeout(function(){f.is(":focus")||(n.addClass("hidden"),a.removeClass("hidden"))},200)}),f.off("focus");const k={inputEl:f,resultEl:h};t.enableQuickSearch({searchOptions:l,searchElements:k}),a.off("click").on("click",function(x){return!config.loggedIn&&!app.user.privileges["search:content"]?(c.alert({message:"[[error:search-requires-login]]",timeout:3e3}),ajaxify.go("login"),!1):(x.stopPropagation(),t.showAndFocusInput(e),!1)}),e.off("submit").on("submit",function(){const x=$(this).find('input[name="query"]'),w=t.getSearchPreferences();return w.term=x.val(),w.in=l.in,o.fire("action:search.submit",{searchOptions:w,searchElements:k}),t.query(w,function(){x.val(""),f.trigger("blur")}),!1})}t.enableQuickSearch=function(e){if(!config.searchEnabled||!app.user.privileges["search:content"])return;const l=Object.assign({in:config.searchDefaultInQuick||"titles"},e.searchOptions),a=e.searchElements.resultEl,n=e.searchElements.inputEl;let f=n.val();const h=a.find(".filter-category");function v(){ajaxify.data.template.category&&ajaxify.data.cid&&C.translate("[[search:search-in-category, "+ajaxify.data.name+"]]",function(E){const b=$("<div></div>").html(E).text();h.find(".name").text(b)}),h.toggleClass("hidden",!(ajaxify.data.template.category&&ajaxify.data.cid))}function k(){e.searchOptions=Object.assign({},l),e.searchOptions.term=n.val(),v(),ajaxify.data.template.category&&ajaxify.data.cid&&h.find('input[type="checkbox"]').is(":checked")&&(e.searchOptions.categories=[ajaxify.data.cid],e.searchOptions.searchChildren=!0),e.hideDuringSearch||(a.removeClass("hidden").find(".quick-search-results-container").html(""),a.find(".loading-indicator").removeClass("hidden")),o.fire("action:search.quick.start",e),e.searchOptions.searchOnly=1,t.api(e.searchOptions,function(E){if(a.find(".loading-indicator").addClass("hidden"),!E.posts||e.hideOnNoMatches&&!E.posts.length)return a.addClass("hidden").find(".quick-search-results-container").html("");E.posts.forEach(function(b){const _=$("<div>"+b.content+"</div>").text(),S=n.val().toLowerCase().replace(/^in:topic-\d+/,""),D=Math.max(0,_.toLowerCase().indexOf(S)-40);b.snippet=utils.escapeHTML((D>0?"...":"")+_.slice(D,D+80)+(_.length-D>80?"...":""))}),app.parseAndTranslate("partials/quick-search-results",E,function(b){b.length&&b.find(".timeago").timeago(),a.toggleClass("hidden",!b.length||!n.is(":focus")).find(".quick-search-results-container").html(b.length?b:"");const _=a.find(".quick-search-results .quick-search-title, .quick-search-results .snippet");t.highlightMatches(e.searchOptions.term,_),o.fire("action:search.quick.complete",{data:E,options:e})})})}a.find('.filter-category input[type="checkbox"]').on("change",function(){n.focus(),k()}),n.off("keyup").on("keyup",utils.debounce(function(){if(n.val().length<3){a.addClass("hidden"),f=n.val();return}if(n.val()!==f){if(f=n.val(),!n.is(":focus"))return a.addClass("hidden");k()}},500));let x=!1;a.on("mousedown",".quick-search-results > *",function(){$(window).one("mouseup",function(){a.addClass("hidden")}),x=!0}),n.on("blur",function(){setTimeout(function(){!n.is(":focus")&&!x&&!a.hasClass("hidden")&&a.addClass("hidden")},200)});let w=!1;o.on("action:ajaxify.end",function(){ajaxify.isCold()||(w=!0)}),n.on("focus",function(){x=!1;const E=n.val();f=E,E&&a.find("#quick-search-results").children().length&&(v(),w?(k(),w=!1):a.removeClass("hidden"),n[0].setSelectionRange(E.startsWith("in:topic")?E.indexOf(" ")+1:0,E.length))}),n.off("refresh").on("refresh",function(){k()})},t.showAndFocusInput=function(e){const l=e.parents(".dropdown-menu");if(l.length){const a=l.siblings("[data-bs-toggle]"),n=i.Dropdown.getOrCreateInstance(a[0]);n&&n.show()}else e.find('[component="search/fields"]').removeClass("hidden"),e.find('[component="search/button"]').addClass("hidden"),e.find('[component="search/fields"] input[name="query"]').trigger("focus")},t.query=function(e,l){l=l||function(){},ajaxify.go("search?"+r(e),l)},t.api=function(e,l){const a=config.relative_path+"/api/search?"+r(e);e.hasOwnProperty("searchOnly")&&delete e.searchOnly;const n=config.relative_path+"/search?"+r(e);$.get(a,function(f){f.url=n,l(f)})};function r(e){const l=e.in||"titles";let a=e.term.replace(/^[ ?#]*/,"");try{a=encodeURIComponent(a)}catch{return c.error("[[error:invalid-search-term]]")}const n={...e,term:a,in:l};return o.fire("action:search.createQueryString",{query:n,data:e}),decodeURIComponent($.param(n))}return t.getSearchPreferences=function(){try{return JSON.parse(g.getItem("search-preferences")||"{}")}catch{return{}}},t.highlightMatches=function(e,l){if(!e||!l.length)return;e=utils.escapeHTML(e.replace(/^"/,"").replace(/"$/,"").trim());const a=e.split(" ").filter(f=>f.length>1).map(function(f){return utils.escapeRegexChars(f)}).join("|"),n=new RegExp("("+a+")","gi");l.each(function(){const f=$(this),h=[];f.find("*").each(function(){$(this).after("<!-- "+h.length+" -->"),h.push($("<div></div>").append($(this)))}),f.html(f.html().replace(n,function(v,k){return'<strong class="search-match fw-bold text-decoration-underline">'+k+"</strong>"})),h.forEach(function(v,k){f.html(f.html().replace("<!-- "+k+" -->",function(){return v.html()}))})}),$(".search-result-text").find("img:not(.not-responsive)").addClass("img-fluid")},t}.apply(p,y),m!==void 0&&(u.exports=m)},33371:(u,p,d)=>{"use strict";var y,m;y=[d(7927)],m=function(C){const g={};return g.init=function(o){const c=o.uploadFormEl;if(c.length&&(c.attr("action",config.relative_path+o.route),o.dragDropAreaEl&&g.handleDragDrop({container:o.dragDropAreaEl,callback:function(i){g.ajaxSubmit({uploadForm:c,upload:i,callback:o.callback})}}),o.pasteEl&&g.handlePaste({container:o.pasteEl,callback:function(i){g.ajaxSubmit({uploadForm:c,upload:i,callback:o.callback})}}),o.uploadBtnEl)){const i=c.find('input[name="files[]"]');o.uploadBtnEl.on("click",function(){i.trigger("click")}),i.on("change",function(t){const s=(t.target||{}).files||($(this).val()?[{name:$(this).val(),type:utils.fileMimeType($(this).val())}]:null);s&&g.ajaxSubmit({uploadForm:c,upload:{files:s,fileNames:Array.from(s).map(r=>r.name)},callback:o.callback})})}},g.handleDragDrop=function(o){let c=!1;const i=o.container,t=o.container.find(".imagedrop");i.on("dragenter",function(){c||(t.css("top","0px"),t.css("height",i.height()+"px"),t.css("line-height",i.height()+"px"),t.show(),t.on("dragleave",function(){t.hide(),t.off("dragleave")}))}),t.on("drop",function(e){e.preventDefault();const l=e.originalEvent.dataTransfer.files;if(l.length){let n;if(window.FormData){n=new FormData;for(var a=0;a<l.length;++a)n.append("files[]",l[a],l[a].name)}o.callback({files:l,formData:n})}return t.hide(),!1});function s(r){return r.preventDefault(),!1}$(document).off("dragstart").on("dragstart",function(){c=!0}).off("dragend").on("dragend, mouseup",function(){c=!1}),t.on("dragover",s),t.on("dragenter",s)},g.handlePaste=function(o){o.container.on("paste",function(i){const t=(i.clipboardData||i.originalEvent.clipboardData||{}).items,s=[],r=[];let e=null;window.FormData&&(e=new FormData),[].forEach.call(t,function(l){const a=l.getAsFile();if(a){const n=utils.generateUUID()+"-"+a.name;e&&e.append("files[]",a,n),s.push(a),r.push(n)}}),s.length&&o.callback({files:s,fileNames:r,formData:e})})},g.ajaxSubmit=function(o){const c=[...o.upload.files];for(let t=0;t<c.length;++t){const s=c[t].type.match(/image./);if(s&&!app.user.privileges["upload:post:image"]||!s&&!app.user.privileges["upload:post:file"])return C.error("[[error:no-privileges]]");if(!app.user.isAdmin&&c[t].size>parseInt(config.maximumFileSize,10)*1024)return o.uploadForm[0].reset(),C.error("[[error:file-too-big, "+config.maximumFileSize+"]]")}const i=Date.now();o.uploadForm.off("submit").on("submit",function(){return $(this).ajaxSubmit({headers:{"x-csrf-token":config.csrf_token},resetForm:!0,clearForm:!0,formData:o.upload.formData,error:function(t){let s=t.responseJSON&&(t.responseJSON.error||t.responseJSON.status&&t.responseJSON.status.message)||"[[error:parse-error]]";t&&t.status===413&&(s=t.statusText||"Request Entity Too Large"),C.error(s),C.remove(i)},uploadProgress:function(t,s,r,e){C.alert({alert_id:i,message:"[[modules:composer.uploading, "+e+"%]]"})},success:function(t){const s=t.response.images;if(s&&s.length)for(var r=0;r<s.length;++r)s[r].filename=c[r].name,s[r].isImage=/image./.test(c[r].type);o.callback(s)},complete:function(){o.uploadForm[0].reset(),setTimeout(C.remove,100,i)}}),!1}),o.uploadForm.submit()},g}.apply(p,y),m!==void 0&&(u.exports=m)}}]);
