"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[12286,16028,63388,48724,86815,61237,82344,80560,73382,26721,28306,43034],{59016:(k,b,l)=>{var g,c;g=[l(4695),l(80431),l(50395),l(7927)],c=function(m,f,i,u){const v={};v.prepareDOM=function(){app.user.uid>0&&m.initUnreadTopics(),f.prepareDOM(),i.prepareDOM(),o(),h(),p()};function o(){$('[component="header/usercontrol"] [data-status]').off("click").on("click",function(t){const s=$(this).attr("data-status");socket.emit("user.setStatus",s,function(a){if(a)return u.error(a);$('[data-uid="'+app.user.uid+'"] [component="user/status"], [component="header/profilelink"] [component="user/status"]').removeClass("away online dnd offline").addClass(s),$('[component="header/usercontrol"] [data-status]').each(function(){$(this).toggleClass("selected",$(this).attr("data-status")===s)}),app.user.status=s}),t.preventDefault()})}function h(){const t=utils.findBootstrapEnvironment();t==="xs"||t==="sm"||utils.isTouchDevice()||$("#header-menu #main-nav").tooltip({selector:".nav-item",placement:"bottom",trigger:"hover",container:"body",animation:!1})}function p(){$("body").on("click",'[component="user/logout"]',function(){return l.e(70145).then(function(){var t=[l(39002)];(function(s){s()}).apply(null,t)}).catch(l.oe),!1})}return v}.apply(b,g),c!==void 0&&(k.exports=c)},50395:(k,b,l)=>{var g,c;g=[l(7237),l(85233)],c=function(m,f){const i={};i.prepareDOM=function(){const p=$('[component="chat/dropdown"]');p.length&&(p.on("show.bs.dropdown",t=>{h("loadChatsDropdown",$(t.target).parent().find('[component="chat/list"]'))}),p.each((t,s)=>{const a=$(s).parent().find(".dropdown-menu");a.hasClass("show")&&h("loadChatsDropdown",a.find('[component="chat/list"]'))}),socket.removeListener("event:chats.receive",u),socket.on("event:chats.receive",u),socket.removeListener("event:user_status_change",v),socket.on("event:user_status_change",v),socket.removeListener("event:chats.roomRename",o),socket.on("event:chats.roomRename",o),socket.on("event:unread.updateChatCount",async function(t){if(t){const[d,w]=await app.require(["chat","forum/chats"]);if(d.isFromBlockedUser(t.fromUid)||d.isLookingAtRoom(t.roomId)||app.user.uid===parseInt(t.fromUid,10))return;w.markChatPageElUnread(t)}let s=await socket.emit("modules.chats.getUnreadCount",{});const a=m.get("chat/icon");s=Math.max(0,s),a.toggleClass("fa-comment",s>0).toggleClass("fa-comment-o",s<=0);const n=s>99?"99+":s;m.get("chat/icon").toggleClass("unread-count",s>0).attr("data-content",n),m.get("chat/count").toggleClass("hidden",s<=0).text(n),f.fire("action:chat.updateCount",{count:s})}))};function u(p){h("onChatMessageReceived",p)}function v(p){h("onUserStatusChange",p)}function o(p){h("onRoomRename",p)}async function h(p,t){(await app.require("chat"))[p](t)}return i}.apply(b,g),c!==void 0&&(k.exports=c)},80431:(k,b,l)=>{var g,c;g=[l(7237)],c=function(m){const f={};f.prepareDOM=function(){const o=m.get("notifications"),h=o.children("a"),p=m.get("notifications/list");h.on("click",function(t){t.preventDefault(),!o.hasClass("open")&&v("loadNotifications",p)}),h.parents(".dropdown").hasClass("open")&&v("loadNotifications",p),socket.removeListener("event:new_notification",i),socket.on("event:new_notification",i),socket.removeListener("event:notifications.updateCount",u),socket.on("event:notifications.updateCount",u)};function i(o){v("onNewNotification",o)}function u(o){v("updateNotifCount",o)}function v(o,h){Promise.all([l.e(38786),l.e(70071)]).then(function(){var p=[l(69986)];(function(t){t[o](h)}).apply(null,p)}).catch(l.oe)}return f}.apply(b,g),c!==void 0&&(k.exports=c)},4695:(k,b,l)=>{var g,c;g=[l(85233)],c=function(m){const f={},i={ignoring:1,notwatching:2,watching:3};f.initUnreadTopics=function(){const o=app.user.unreadData;function h(s){if(s&&s.posts&&s.posts.length&&o){const a=s.posts[0];if(parseInt(a.uid,10)===parseInt(app.user.uid,10)||!a.topic.isFollowing&&a.categoryWatchState!==i.watching)return;const n=a.topic.tid;(!o[""][n]||!o.new[n]||!o.watched[n]||!o.unreplied[n])&&t(n),o[""][n]||(p(""),o[""][n]=!0),a.isMain&&parseInt(a.uid,10)!==parseInt(app.user.uid,10)&&!o.new[n]&&(p("new"),o.new[n]=!0),parseInt(a.topic.postcount,10)<=1&&!o.unreplied[n]&&(p("unreplied"),o.unreplied[n]=!0),a.topic.isFollowing&&!o.watched[n]&&(p("watched"),o.watched[n]=!0)}}function p(s){const a="/unread"+(s?"?filter="+s:""),n=1+parseInt($('a[href="'+config.relative_path+a+'"].navigation-link i').attr("data-content"),10);v(a,n)}function t(s){$('[data-tid="'+s+'"]').addClass("unread")}$(window).on("action:ajaxify.end",function(){ajaxify.data.template.topic&&["","new","watched","unreplied"].forEach(function(s){delete o[s][ajaxify.data.tid]})}),socket.removeListener("event:new_post",h),socket.on("event:new_post",h),socket.removeListener("event:unread.updateCount",u),socket.on("event:unread.updateCount",u)};function u(o){v("/unread",o.unreadTopicCount),v("/unread?filter=new",o.unreadNewTopicCount),v("/unread?filter=watched",o.unreadWatchedTopicCount),v("/unread?filter=unreplied",o.unreadUnrepliedTopicCount)}function v(o,h){if(!utils.isNumber(h))return;h=Math.max(0,h);const p=h>99?"99+":h,t=$('a[href="'+config.relative_path+o+'"].navigation-link');t.find("i").toggleClass("unread-count",h>0).attr("data-content",p),t.find('[component="navigation/count"]').toggleClass("hidden",h<=0).text(h),$('#mobile-menu [data-unread-url="'+o+'"]').attr("data-content",p),$('[component="unread/count"][data-unread-url="'+o+'"]').toggleClass("hidden",h<=0).text(p),m.fire("action:unread.updateCount",{url:o,count:h})}return f.updateUnreadTopicCount=v,f}.apply(b,g),c!==void 0&&(k.exports=c)},78989:(k,b,l)=>{var g,c;g=[l(63281)],c=function(m){const f={};return f.init=function(){$("body").on("click",'[component="pagination/select-page"]',function(){return m.prompt("[[global:enter_page_number]]",function(i){f.loadPage(i)}),!1})},f.loadPage=function(i,u){if(u=u||function(){},i=parseInt(i,10),!utils.isNumber(i)||i<1||i>ajaxify.data.pagination.pageCount)return;const v=utils.params();v.page=i;const o=window.location.pathname+"?"+$.param(v);ajaxify.go(o,u)},f.nextPage=function(i){f.loadPage(ajaxify.data.pagination.currentPage+1,i)},f.previousPage=function(i){f.loadPage(ajaxify.data.pagination.currentPage-1,i)},f}.apply(b,g),c!==void 0&&(k.exports=c)},11120:k=>{k.exports=function(b,l,g){l.setGlobal("true",!0),l.setGlobal("false",!1);const c=24*60*60*1e3,m={displayMenuItem:i,buildMetaTag:u,buildLinkTag:v,stringify:o,escape:h,stripTags:p,buildCategoryIcon:t,buildCategoryLabel:s,generateCategoryBackground:a,generateChildrenCategories:n,generateTopicClass:d,membershipBtn:w,spawnPrivilegeStates:D,localeToHTML:x,renderTopicImage:I,renderDigestAvatar:_,userAgentIcons:y,buildAvatar:A,increment:R,generateRepliedTo:B,generateWrote:P,isoTimeToLocaleString:F,shouldHideReplyContainer:K,humanReadableNumber:j,formattedNumber:q,register:O,__escape:f};function f(e){return e}function i(e,r){const C=e.navigation[r];return!(!C||C.route.match("/users")&&e.user&&!e.user.privileges["view:users"]||C.route.match("/tags")&&e.user&&!e.user.privileges["view:tags"]||C.route.match("/groups")&&e.user&&!e.user.privileges["view:groups"])}function u(e){const r=e.name?'name="'+e.name+'" ':"",C=e.property?'property="'+e.property+'" ':"",E=e.content?'content="'+e.content.replace(/\n/g," ")+'" ':"";return"<meta "+r+C+E+`/>
	`}function v(e){const r=["link","rel","as","type","href","sizes","title","crossorigin"],[C,E,M,S,T,N,U,W]=r.map(L=>e[L]?`${L}="${e[L]}" `:"");return"<link "+C+E+M+S+N+U+T+W+`/>
	`}function o(e){return JSON.stringify(e).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/g,"&quot;")}function h(e){return b.escapeHTML(e)}function p(e){return b.stripHTMLTags(e)}function t(e,r,C){return e?`<span class="icon d-inline-flex justify-content-center align-items-center align-middle ${C}" style="${a(e)} width:${r}; height: ${r}; font-size: ${parseInt(r,10)/2}px;">${e.icon?`<i class="fa fa-fw ${e.icon}"></i>`:""}</span>`:""}function s(e,r=""){return e?`<span class="badge px-1 ${r}" style="color: ${e.color};background-color: ${e.bgColor};border-color: ${e.bgColor}!important;">
			${e.icon&&e.icon!=="fa-nbb-none"?`<i class="fa fa-fw ${e.icon}"></i>`:""}
			${e.name}
		</span>`:""}function a(e){if(!e)return"";const r=[];return e.bgColor&&(r.push("background-color: "+e.bgColor),r.push(`border-color: ${e.bgColor}!important`)),e.color&&r.push("color: "+e.color),e.backgroundImage&&(r.push("background-image: url("+e.backgroundImage+")"),e.imageClass&&r.push("background-size: "+e.imageClass)),r.join("; ")+";"}function n(e){let r="";return!e||!e.children||!e.children.length||(e.children.forEach(function(C){if(C&&!C.isSection){const E=C.link?C.link:g+"/category/"+C.slug;r+='<span class="category-children-item float-start"><div role="presentation" class="icon float-start" style="'+a(C)+'"><i class="fa fa-fw '+C.icon+'"></i></div><a href="'+E+'"><small>'+C.name+"</small></a></span>"}}),r=r&&'<span class="category-children">'+r+"</span>"),r}function d(e){return["locked","pinned","deleted","unread","scheduled"].filter(C=>!!e[C]).join(" ")}function w(e,r=""){return e.isMember&&e.name!=="administrators"?`<button class="btn btn-danger ${r}" data-action="leave" data-group="${e.displayName}" ${e.disableLeave?" disabled":""}><i class="fa fa-times"></i> [[groups:membership.leave-group]]</button>`:e.isPending&&e.name!=="administrators"?`<button class="btn btn-warning disabled ${r}"><i class="fa fa-clock-o"></i> [[groups:membership.invitation-pending]]</button>`:e.isInvited?`<button class="btn btn-link" data-action="rejectInvite" data-group="${e.displayName}">[[groups:membership.reject]]</button><button class="btn btn-success" data-action="acceptInvite" data-group="${e.name}"><i class="fa fa-plus"></i> [[groups:membership.accept-invitation]]</button>`:!e.disableJoinRequests&&e.name!=="administrators"?`<button class="btn btn-success" data-action="join" data-group="${e.displayName}"><i class="fa fa-plus"></i> [[groups:membership.join-group]]</button>`:""}function D(e,r){const C=[];for(const E in r)r.hasOwnProperty(E)&&C.push({name:E,state:r[E]});return C.map(function(E){const M=["groups:moderate","groups:posts:upvote","groups:posts:downvote","groups:local:login","groups:group:create"],S=["groups:find","groups:read","groups:topics:read","groups:view:users","groups:view:tags","groups:view:groups"],T=["groups:moderate"],N=e==="guests"&&(M.includes(E.name)||E.name.startsWith("groups:admin:"))||e==="spiders"&&!S.includes(E.name)||e==="Global Moderators"&&T.includes(E.name);return`
				<td data-privilege="${E.name}" data-value="${E.state}">
					<div class="form-check text-center">
						<input class="form-check-input float-none" autocomplete="off" type="checkbox"${E.state?" checked":""}${N?' disabled="disabled"':""} />
					</div>
				</td>
			`}).join("")}function x(e,r){return e=e||r||"en-GB",e.replace("_","-")}function I(e){return e.thumb?'<img src="'+e.thumb+'" class="img-circle user-img" title="'+e.user.username+'" />':'<img component="user/picture" data-uid="'+e.user.uid+'" src="'+e.user.picture+'" class="user-img" title="'+e.user.username+'" />'}function _(e){return e.teaser?e.teaser.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.teaser.user.picture+'" title="'+e.teaser.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.teaser.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.teaser.user["icon:text"]+"</div>":e.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+e.user.picture+'" title="'+e.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+e.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+e.user["icon:text"]+"</div>"}function y(e){let r="";switch(e.platform){case"Linux":r+='<i class="fa fa-fw fa-linux"></i>';break;case"Microsoft Windows":r+='<i class="fa fa-fw fa-windows"></i>';break;case"Apple Mac":r+='<i class="fa fa-fw fa-apple"></i>';break;case"Android":r+='<i class="fa fa-fw fa-android"></i>';break;case"iPad":r+='<i class="fa fa-fw fa-tablet"></i>';break;case"iPod":case"iPhone":r+='<i class="fa fa-fw fa-mobile"></i>';break;default:r+='<i class="fa fa-fw fa-question-circle"></i>';break}switch(e.browser){case"Chrome":r+='<i class="fa fa-fw fa-chrome"></i>';break;case"Firefox":r+='<i class="fa fa-fw fa-firefox"></i>';break;case"Safari":r+='<i class="fa fa-fw fa-safari"></i>';break;case"IE":r+='<i class="fa fa-fw fa-internet-explorer"></i>';break;case"Edge":r+='<i class="fa fa-fw fa-edge"></i>';break;default:r+='<i class="fa fa-fw fa-question-circle"></i>';break}return r}function A(e,r,C,E,M){e||(e=this);const S=new Map([["alt",e.username],["title",e.username],["data-uid",e.uid],["loading","lazy"]]),T=[`--avatar-size: ${r};`],N=W=>Array.from(W).reduce((L,[H,Y])=>(L+=` ${H}="${Y}"`,L),"");E=E||"",S.set("class",`avatar ${E}${C?" avatar-rounded":""}`);let U="";return e.picture&&(S.set("component",M||"avatar/picture"),U+="<img "+N(S)+' src="'+e.picture+'" style="'+T.join(" ")+'" onError="this.remove();" itemprop="image" />'),S.set("component",M||"avatar/icon"),T.push("background-color: "+e["icon:bgColor"]+";"),U+="<span "+N(S)+' style="'+T.join(" ")+'">'+e["icon:text"]+"</span>",U}function R(e,r){return e+parseInt(r,10)}function B(e,r){const C=e.parent&&e.parent.displayname?e.parent.displayname:"[[global:guest]]";return`[[topic:replied-to-user-${e.timestamp<Date.now()-r*c?"on":"ago"}, ${e.toPid}, ${g}/post/${e.toPid}, ${C}, ${g}/post/${e.pid}, ${e.timestampISO}]]`}function P(e,r){return`[[topic:wrote-${e.timestamp<Date.now()-r*c?"on":"ago"}, ${g}/post/${e.pid}, ${e.timestampISO}]]`}function F(e){return new Date(e).toLocaleString().replace(/,/g,"&#44;")}function K(e){return!!(e.replies.count<=0||e.replies.hasSingleImmediateReply)}function j(e,r=1){return b.makeNumberHumanReadable(e,r)}function q(e){return b.addCommas(e)}function O(){Object.keys(m).forEach(function(e){l.registerHelper(e,m[e])})}return m}},59265:(k,b,l)=>{var g,c;const m=l(11120);g=[l(96795),l(59006)],c=function(f,i){return m(f,i,config.relative_path)}.apply(b,g),c!==void 0&&(k.exports=c)},44882:(k,b,l)=>{var g,c;g=[l(63281),l(32230),l(66603),l(7927),l(85233)],c=function(m,f,i,u,v){const o={};let h,p;o.show=function(){v.one("action:ajaxify.end",()=>{s(),t(),o.showEmailConfirmWarning()})},o.showEmailConfirmWarning=function(a){if(!config.emailPrompt||!app.user.uid||parseInt(i.getItem("email-confirm-dismiss"),10)===1)return;const n={alert_id:"email_confirm",type:"warning",timeout:0,closefn:()=>{i.setItem("email-confirm-dismiss",1)}};!app.user.email&&!app.user.isEmailConfirmSent?(n.message="[[error:no-email-to-confirm]]",n.clickfn=function(){u.remove("email_confirm"),ajaxify.go("user/"+app.user.userslug+"/edit/email")},u.alert(n)):!app.user["email:confirmed"]&&!app.user.isEmailConfirmSent?(n.message=a||"[[error:email-not-confirmed]]",n.clickfn=function(){u.remove("email_confirm"),ajaxify.go("/me/edit/email")},u.alert(n)):!app.user["email:confirmed"]&&app.user.isEmailConfirmSent&&(n.message="[[error:email-not-confirmed-email-sent]]",u.alert(n))};function t(){!config.cookies.enabled||!navigator.cookieEnabled||app.inAdmin||i.getItem("cookieconsent")==="1"||(config.cookies.message=f.unescape(config.cookies.message),config.cookies.dismiss=f.unescape(config.cookies.dismiss),config.cookies.link=f.unescape(config.cookies.link),config.cookies.link_url=f.unescape(config.cookies.link_url),app.parseAndTranslate("partials/cookie-consent",config.cookies,function(a){$(document.body).append(a),$(document.body).addClass("cookie-consent-open");const n=$(".cookie-consent");n.find("button").on("click",function(){i.setItem("cookieconsent","1"),n.remove(),$(document.body).removeClass("cookie-consent-open")})}))}function s(){const a=utils.params({full:!0});h=a.has("loggedin"),p=a.get("register"),h&&(u.alert({type:"success",title:"[[global:welcome_back]] "+app.user.username+"!",message:"[[global:you_have_successfully_logged_in]]",timeout:5e3}),a.delete("loggedin")),p&&(m.alert({message:utils.escapeHTML(decodeURIComponent(p))}),a.delete("register")),a.has("lang")&&a.get("lang")===config.defaultLang&&(console.info(`The "lang" parameter was passed in to set the language to "${a.get("lang")}", but that is already the forum default language.`),a.delete("lang"));const n=a.toString();ajaxify.updateHistory(ajaxify.currentPage+(n?`?${n}`:"")+document.location.hash,!0)}return o.showInvalidSession=function(){m.alert({title:"[[error:invalid-session]]",message:"[[error:invalid-session-text]]",closeButton:!1,callback:function(){window.location.reload()}})},o.showSessionMismatch=function(){m.alert({title:"[[error:session-mismatch]]",message:"[[error:session-mismatch-text]]",closeButton:!1,callback:function(){window.location.reload()}})},o}.apply(b,g),c!==void 0&&(k.exports=c)},7073:(k,b,l)=>{var g,c;g=[l(32230),l(66603),l(85233),l(7927),l(73138)],c=function(m,f,i,u,v){const o={current:{}};o.init=function(t){if(!config.searchEnabled)return;t=t||{in:config.searchDefaultInQuick||"titles"},$('[component="search/form"]').each((a,n)=>{h($(n),t)})};function h(t,s){const a=t.find('[component="search/button"]'),n=t.find('[component="search/fields"]'),d=n.find('input[name="query"]'),w=n.find("#quick-search-container"),D=n.hasClass("hidden");t.find(".advanced-search-link").off("mousedown").on("mousedown",function(){ajaxify.go("/search")}),D&&d.off("blur").on("blur",function(){setTimeout(function(){d.is(":focus")||(n.addClass("hidden"),a.removeClass("hidden"))},200)}),d.off("focus");const x={inputEl:d,resultEl:w};o.enableQuickSearch({searchOptions:s,searchElements:x}),a.off("click").on("click",function(I){return!config.loggedIn&&!app.user.privileges["search:content"]?(u.alert({message:"[[error:search-requires-login]]",timeout:3e3}),ajaxify.go("login"),!1):(I.stopPropagation(),o.showAndFocusInput(t),!1)}),t.off("submit").on("submit",function(){const I=$(this).find('input[name="query"]'),_=o.getSearchPreferences();return _.term=I.val(),_.in=s.in,i.fire("action:search.submit",{searchOptions:_,searchElements:x}),o.query(_,function(){I.val(""),d.trigger("blur")}),!1})}o.enableQuickSearch=function(t){if(!config.searchEnabled||!app.user.privileges["search:content"])return;const s=Object.assign({in:config.searchDefaultInQuick||"titles"},t.searchOptions),a=t.searchElements.resultEl,n=t.searchElements.inputEl;let d=n.val();const w=a.find(".filter-category");function D(){ajaxify.data.template.category&&ajaxify.data.cid&&m.translate("[[search:search-in-category, "+ajaxify.data.name+"]]",function(y){const A=$("<div></div>").html(y).text();w.find(".name").text(A)}),w.toggleClass("hidden",!(ajaxify.data.template.category&&ajaxify.data.cid))}function x(){t.searchOptions=Object.assign({},s),t.searchOptions.term=n.val(),D(),ajaxify.data.template.category&&ajaxify.data.cid&&w.find('input[type="checkbox"]').is(":checked")&&(t.searchOptions.categories=[ajaxify.data.cid],t.searchOptions.searchChildren=!0),t.hideDuringSearch||(a.removeClass("hidden").find(".quick-search-results-container").html(""),a.find(".loading-indicator").removeClass("hidden")),i.fire("action:search.quick.start",t),t.searchOptions.searchOnly=1,o.api(t.searchOptions,function(y){if(a.find(".loading-indicator").addClass("hidden"),!y.posts||t.hideOnNoMatches&&!y.posts.length)return a.addClass("hidden").find(".quick-search-results-container").html("");y.posts.forEach(function(A){const R=$("<div>"+A.content+"</div>").text(),B=n.val().toLowerCase().replace(/^in:topic-\d+/,""),P=Math.max(0,R.toLowerCase().indexOf(B)-40);A.snippet=utils.escapeHTML((P>0?"...":"")+R.slice(P,P+80)+(R.length-P>80?"...":""))}),app.parseAndTranslate("partials/quick-search-results",y,function(A){A.length&&A.find(".timeago").timeago(),a.toggleClass("hidden",!A.length||!n.is(":focus")).find(".quick-search-results-container").html(A.length?A:"");const R=a.find(".quick-search-results .quick-search-title, .quick-search-results .snippet");o.highlightMatches(t.searchOptions.term,R),i.fire("action:search.quick.complete",{data:y,options:t})})})}a.find('.filter-category input[type="checkbox"]').on("change",function(){n.focus(),x()}),n.off("keyup").on("keyup",utils.debounce(function(){if(n.val().length<3){a.addClass("hidden"),d=n.val();return}if(n.val()!==d){if(d=n.val(),!n.is(":focus"))return a.addClass("hidden");x()}},500));let I=!1;a.on("mousedown",".quick-search-results > *",function(){$(window).one("mouseup",function(){a.addClass("hidden")}),I=!0}),n.on("blur",function(){setTimeout(function(){!n.is(":focus")&&!I&&!a.hasClass("hidden")&&a.addClass("hidden")},200)});let _=!1;i.on("action:ajaxify.end",function(){ajaxify.isCold()||(_=!0)}),n.on("focus",function(){I=!1;const y=n.val();d=y,y&&a.find("#quick-search-results").children().length&&(D(),_?(x(),_=!1):a.removeClass("hidden"),n[0].setSelectionRange(y.startsWith("in:topic")?y.indexOf(" ")+1:0,y.length))}),n.off("refresh").on("refresh",function(){x()})},o.showAndFocusInput=function(t){const s=t.parents(".dropdown-menu");if(s.length){const a=s.siblings("[data-bs-toggle]"),n=v.Dropdown.getOrCreateInstance(a[0]);n&&n.show()}else t.find('[component="search/fields"]').removeClass("hidden"),t.find('[component="search/button"]').addClass("hidden"),t.find('[component="search/fields"] input[name="query"]').trigger("focus")},o.query=function(t,s){s=s||function(){},ajaxify.go("search?"+p(t),s)},o.api=function(t,s){const a=config.relative_path+"/api/search?"+p(t);t.hasOwnProperty("searchOnly")&&delete t.searchOnly;const n=config.relative_path+"/search?"+p(t);$.get(a,function(d){d.url=n,s(d)})};function p(t){const s=t.in||"titles";let a=t.term.replace(/^[ ?#]*/,"");try{a=encodeURIComponent(a)}catch{return u.error("[[error:invalid-search-term]]")}const n={...t,term:a,in:s};return i.fire("action:search.createQueryString",{query:n,data:t}),decodeURIComponent($.param(n))}return o.getSearchPreferences=function(){try{return JSON.parse(f.getItem("search-preferences")||"{}")}catch{return{}}},o.highlightMatches=function(t,s){if(!t||!s.length)return;t=utils.escapeHTML(t.replace(/^"/,"").replace(/"$/,"").trim());const a=t.split(" ").filter(d=>d.length>1).map(function(d){return utils.escapeRegexChars(d)}).join("|"),n=new RegExp("("+a+")","gi");s.each(function(){const d=$(this),w=[];d.find("*").each(function(){$(this).after("<!-- "+w.length+" -->"),w.push($("<div></div>").append($(this)))}),d.html(d.html().replace(n,function(D,x){return'<strong class="search-match fw-bold text-decoration-underline">'+x+"</strong>"})),w.forEach(function(D,x){d.html(d.html().replace("<!-- "+x+" -->",function(){return D.html()}))})}),$(".search-result-text").find("img:not(.not-responsive)").addClass("img-fluid")},o}.apply(b,g),c!==void 0&&(k.exports=c)},66603:(k,b,l)=>{var g;g=function(){function c(){this._store={},this._keys=[]}c.prototype.isMock=!0,c.prototype.setItem=function(i,u){i=String(i),this._keys.indexOf(i)===-1&&this._keys.push(i),this._store[i]=u},c.prototype.getItem=function(i){return i=String(i),this._keys.indexOf(i)===-1?null:this._store[i]},c.prototype.removeItem=function(i){i=String(i),this._keys=this._keys.filter(function(u){return u!==i}),this._store[i]=null},c.prototype.clear=function(){this._keys=[],this._store={}},c.prototype.key=function(i){return i=parseInt(i,10)||0,this._keys[i]},Object.defineProperty&&Object.defineProperty(c.prototype,"length",{get:function(){return this._keys.length}});let m;const f=Date.now().toString();try{if(m=window.localStorage,m.setItem(f,f),m.getItem(f)!==f)throw Error("localStorage behaved unexpectedly");return m.removeItem(f),m}catch(i){console.warn(i),console.warn("localStorage failed, falling back on sessionStorage");try{if(m=window.sessionStorage,m.setItem(f,f),m.getItem(f)!==f)throw Error("sessionStorage behaved unexpectedly");return m.removeItem(f),m}catch(u){return console.warn(u),console.warn("sessionStorage failed, falling back on memory storage"),new c}}}.call(b,l,b,k),g!==void 0&&(k.exports=g)},27145:(k,b,l)=>{k=l.nmd(k);var g,c;g=[l(32230),l(85233)],c=function(m,f){const i={};let u=!1;i.init=function(){if(i.taskbar=$('[component="taskbar"]'),i.tasklist=i.taskbar.find("ul"),!i.taskbar.length||!i.tasklist.length){u=!0;return}i.taskbar.on("click","li",async function(){const t=$(this),s=t.attr("data-module"),a=t.attr("data-uuid"),n=await app.require(s);return t.hasClass("active")?n.minimize(a):(o(),n.load(a),i.toggleNew(a,!1),i.tasklist.removeClass("active"),t.addClass("active")),!1}),$(window).on("action:app.loggedOut",function(){i.closeAll()})},i.close=async function(t,s){if(u)return;if(i.tasklist.find('[data-module="'+k+'"][data-uuid="'+s+'"]').length){const n=await app.require(t);n&&typeof n.close=="function"&&n.close(s)}},i.closeAll=function(t){if(u)return;let s="[data-uuid]";t&&(s='[data-module="'+t+'"]'+s),i.tasklist.find(s).each(function(a,n){i.close(t||n.getAttribute("data-module"),n.getAttribute("data-uuid"))})},i.discard=function(t,s){if(u)return;i.tasklist.find('[data-module="'+t+'"][data-uuid="'+s+'"]').remove(),v()},i.push=function(t,s,a,n){if(n=n||function(){},u)return n();const d=i.tasklist.find('li[data-uuid="'+s+'"]'),w={module:t,uuid:s,options:a,element:d};f.fire("filter:taskbar.push",w),!d.length&&w.module?h(w,n):n(d)},i.get=function(t){return u?[]:$('[data-module="'+t+'"]').map(function(a,n){return $(n).data()})},i.minimize=function(t,s){if(u)return;i.tasklist.find('[data-module="'+t+'"][data-uuid="'+s+'"]').toggleClass("active",!1)},i.toggleNew=function(t,s,a){if(u)return;i.tasklist.find('[data-uuid="'+t+'"]').toggleClass("new",s),a||f.fire("action:taskbar.toggleNew",t)},i.updateActive=function(t){if(u)return;const s=i.tasklist.find("li");s.removeClass("active"),s.filter('[data-uuid="'+t+'"]').addClass("active"),$("[data-uuid]:not([data-module])").toggleClass("modal-unfocused",!0),$('[data-uuid="'+t+'"]:not([data-module])').toggleClass("modal-unfocused",!1)},i.isActive=function(t){return u?!1:i.tasklist.find('li[data-uuid="'+t+'"]').hasClass("active")};function v(){if(u)return;i.tasklist.find("li").length>0?i.taskbar.attr("data-active","1"):i.taskbar.removeAttr("data-active")}function o(){u||i.tasklist.find(".active").removeClass("active")}function h(t,s){if(u)return s();m.translate(t.options.title,function(a){const n=$("<div></div>").text(a||"NodeBB Task").html(),d=$("<li></li>").addClass(t.options.className).html('<a href="#"'+(t.options.image?` style="background-image: url('`+t.options.image.replace(/&#x2F;/g,"/")+`'); background-size: cover;"`:"")+">"+(t.options.icon?'<i class="fa '+t.options.icon+'"></i> ':"")+'<span aria-label="'+n+'" component="taskbar/title">'+n+"</span></a>").attr({title:n,"data-module":t.module,"data-uuid":t.uuid}).addClass(t.options.state!==void 0?t.options.state:"active");(!t.options.state||t.options.state==="active")&&o(),i.tasklist.append(d),v(),t.element=d,d.data(t),f.fire("action:taskbar.pushed",t),s(d)})}const p=function(t,s,a){switch(s){case"title":t.find('[component="taskbar/title"]').text(a);break;case"icon":t.find("i").attr("class","fa fa-"+a);break;case"image":t.find("a").css("background-image",a?'url("'+a.replace(/&#x2F;/g,"/")+'")':"");break;case"background-color":t.find("a").css("background-color",a);break;case"color":t.find("a").css("color",a);break}};return i.update=function(t,s,a){if(u)return;const n=i.tasklist.find('[data-module="'+t+'"][data-uuid="'+s+'"]');if(!n.length)return;const d=n.data();Object.keys(a).forEach(function(w){d[w]=a[w],p(n,w,a[w])}),n.data(d)},i}.apply(b,g),c!==void 0&&(k.exports=c)}}]);
