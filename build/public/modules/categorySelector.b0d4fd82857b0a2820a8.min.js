"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[49286,66623],{22905:(h,C,g)=>{var u,f;u=[g(7927),g(73138)],f=function(p,b){const m={};return m.init=function(o,e){let t=null;e=e||{},e.privilege=e.privilege||"topics:read",e.states=e.states||["watching","notwatching","ignoring"],e.cacheList=e.hasOwnProperty("cacheList")?e.cacheList:!0;let a=[];Array.isArray(e.localCategories)&&(a=e.localCategories.map(r=>({...r}))),e.selectedCids=e.selectedCids||ajaxify.data.selectedCids||[];const c=o.find('[component="category-selector-search"]');if(!c.length)return;const n=c.parent('[component="category/dropdown"]').length>0||c.parent('[component="category-selector"]').length>0;o.on("show.bs.dropdown",function(){n&&(o.find(".dropdown-toggle").css({visibility:"hidden"}),c.removeClass("hidden"),c.css({"z-index":o.find(".dropdown-toggle").css("z-index")+1}));function r(){const i=c.find("input").val();i.length>1||!i&&!t?d(i,function(s){t=e.cacheList&&(t||s),l(s)}):!i&&t&&l(t)}c.on("click",function(i){i.preventDefault(),i.stopPropagation()}),c.find("input").val("").on("keyup",utils.debounce(r,300)),r()}),o.on("shown.bs.dropdown",function(){["xs","sm"].includes(utils.findBootstrapEnvironment())||c.find("input").focus()}),o.on("hide.bs.dropdown",function(){n&&(o.find(".dropdown-toggle").css({visibility:"inherit"}),c.addClass("hidden")),c.off("click"),c.find("input").off("keyup")});function d(r,i){socket.emit("categories.categorySearch",{search:r,query:utils.params(),parentCid:e.parentCid||0,selectedCids:e.selectedCids,privilege:e.privilege,states:e.states,showLinks:e.showLinks},function(s,y){if(s)return p.error(s);i(a.concat(y))})}function l(r){const i=e.selectedCids.map(String);r.forEach(function(s){s.selected=i.includes(String(s.cid))}),app.parseAndTranslate(e.template,{categoryItems:r.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(s){o.find('[component="category/list"]').html(s.find('[component="category/list"]').html()),o.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!r.length);const y=b.Dropdown.getInstance(o.find(".dropdown-toggle").get(0));y&&y.update()})}},m}.apply(C,u),f!==void 0&&(h.exports=f)},50548:(h,C,g)=>{var u,f;u=[g(22905),g(63281),g(85233),g(32230)],f=function(p,b,m,o){const e={};return e.init=function(t,a){if(!t||!t.length)return;a=a||{};const c=a.onSelect||function(){};a.states=a.states||["watching","notwatching","ignoring"],a.template=a.template||"partials/category/selector-dropdown-left",m.fire("action:category.selector.options",{el:t,options:a}),p.init(t,a);const n={el:t,selectedCategory:null};t.on("click","[data-cid]",function(){const l=$(this);return l.hasClass("disabled")?!1:(n.selectCategory(l.attr("data-cid")),c(n.selectedCategory))});let d=n.el.find('[component="category-selector-selected"]').html();return o.translate(d,l=>{d=l}),n.selectCategory=function(l){const r=n.el.find('[data-cid="'+l+'"]');n.selectedCategory={cid:l,name:r.attr("data-name")},r.length?n.el.find('[component="category-selector-selected"]').html(r.find('[component="category-markup"]').html()):n.el.find('[component="category-selector-selected"]').html(d)},n.getSelectedCategory=function(){return n.selectedCategory},n.getSelectedCid=function(){return n.selectedCategory?n.selectedCategory.cid:0},a.hasOwnProperty("selectedCategory")&&app.parseAndTranslate(a.template,{selectedCategory:a.selectedCategory},function(l){n.el.find('[component="category-selector-selected"]').html(l.find('[component="category-selector-selected"]').html())}),n},e.modal=function(t){t=t||{},t.onSelect=t.onSelect||function(){},t.onSubmit=t.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:t.message},function(a){const c=b.dialog({title:t.title||"[[modules:composer.select_category]]",message:a,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:d}}}),n=e.init(c.find('[component="category-selector"]'),t);function d(l){return l.preventDefault(),n.selectedCategory&&(t.onSubmit(n.selectedCategory),c.modal("hide")),!1}t.openOnLoad&&c.on("shown.bs.modal",function(){c.find(".dropdown-toggle").dropdown("toggle")}),c.find("form").on("submit",d)})},e}.apply(C,u),f!==void 0&&(h.exports=f)}}]);
