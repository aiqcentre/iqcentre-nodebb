"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1897,70565,83014,99617,74344],{56351:(O,A,r)=>{var h,D;h=[r(59006),r(74344),r(63281),r(7927)],D=function(d,m,p,o){const s={};return s.banAccount=function(a,l){a=a||ajaxify.data.theirid,d.render("modals/temporary-ban",{}).then(function(g){p.dialog({className:"ban-modal",title:"[[user:ban_account]]",message:g,show:!0,buttons:{close:{label:"[[global:close]]",className:"btn-link"},submit:{label:"[[user:ban_account]]",callback:function(){const u=$(".ban-modal form").serializeArray().reduce(function(f,e){return f[e.name]=e.value,f},{}),y=u.length>0?Date.now()+u.length*1e3*60*60*(parseInt(u.unit,10)?24:1):0;m.put("/users/"+a+"/ban",{until:y,reason:u.reason||""}).then(()=>{if(typeof l=="function")return l();ajaxify.refresh()}).catch(o.error)}}}})})},s.unbanAccount=function(a){m.del("/users/"+a+"/ban").then(()=>{ajaxify.refresh()}).catch(o.error)},s.muteAccount=function(a,l){a=a||ajaxify.data.theirid,d.render("modals/temporary-mute",{}).then(function(g){p.dialog({className:"mute-modal",title:"[[user:mute_account]]",message:g,show:!0,buttons:{close:{label:"[[global:close]]",className:"btn-link"},submit:{label:"[[user:mute_account]]",callback:function(){const u=$(".mute-modal form").serializeArray().reduce(function(f,e){return f[e.name]=e.value,f},{}),y=u.length>0?Date.now()+u.length*1e3*60*60*(parseInt(u.unit,10)?24:1):0;m.put("/users/"+a+"/mute",{until:y,reason:u.reason||""}).then(()=>{if(typeof l=="function")return l();ajaxify.refresh()}).catch(o.error)}}}})})},s.unmuteAccount=function(a){m.del("/users/"+a+"/mute").then(()=>{ajaxify.refresh()}).catch(o.error)},s}.apply(A,h),D!==void 0&&(O.exports=D)},74344:(O,A,r)=>{r.r(A),r.d(A,{del:()=>f,get:()=>a,head:()=>l,patch:()=>u,post:()=>g,put:()=>y});var h=r(85233),D=r.n(h),d=r(63281),m=r.n(d);const p=config.relative_path+"/api/v3";function o(e,t){if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:p+e.url,typeof t=="function"){s(e,t);return}return new Promise((n,i)=>{s(e,function(b,x){if(b)return b.message==="A valid login session was not found. Please log in and try again."?(0,d.confirm)("[[error:api.reauth-required]]",E=>{E&&ajaxify.go("login")}):i(b);n(x)})})}async function s(e,t){const{url:n}=e;delete e.url,e.data&&!(e.data instanceof FormData)&&(e.data=JSON.stringify(e.data||{}),e.headers["content-type"]="application/json; charset=utf-8"),{options:e}=await(0,h.fire)("filter:api.options",{options:e}),e.data&&(e.body=e.data,delete e.data);const i=await fetch(n,e),{headers:b}=i,x=b.get("content-type"),E=x&&x.startsWith("application/json");let c;if(E?c=await i.json():c=await i.text(),!i.ok)return t(new Error(E?c.status.message:c));t(null,E&&c.hasOwnProperty("status")&&c.hasOwnProperty("response")?c.response:c)}function a(e,t,n){return o({url:e+(t&&Object.keys(t).length?"?"+$.param(t):"")},n)}function l(e,t,n){return o({url:e+(t&&Object.keys(t).length?"?"+$.param(t):""),method:"head"},n)}function g(e,t,n){return o({url:e,method:"post",data:t,headers:{"x-csrf-token":config.csrf_token}},n)}function u(e,t,n){return o({url:e,method:"patch",data:t,headers:{"x-csrf-token":config.csrf_token}},n)}function y(e,t,n){return o({url:e,method:"put",data:t,headers:{"x-csrf-token":config.csrf_token}},n)}function f(e,t,n){return o({url:e,method:"delete",data:t,headers:{"x-csrf-token":config.csrf_token}},n)}}}]);
