(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[37986,62735],{99398:(d,x,f)=>{d.exports=f(18196)},83713:(d,x,f)=>{d.exports=f(51077)},18196:(d,x,f)=>{"use strict";var _,g;_=[f(83713)],g=function(h){var i={};return i.insertIntoTextarea=function(t,r){var e={context:this,textarea:t,value:r,preventDefault:!1};if($(window).trigger("action:composer.insertIntoTextarea",e),!e.preventDefault){var n=$(e.textarea),a=n.val(),c=n.parents('[component="composer"]');n.val(a.slice(0,e.textarea.selectionStart)+e.value+a.slice(e.textarea.selectionStart)),h.render(c)}},i.replaceSelectionInTextareaWith=function(t,r){var e={context:this,textarea:t,value:r,preventDefault:!1};if($(window).trigger("action:composer.replaceSelectionInTextareaWith",e),!e.preventDefault){var n=$(e.textarea),a=n.val(),c=n.parents('[component="composer"]');n.val(a.slice(0,e.textarea.selectionStart)+e.value+a.slice(e.textarea.selectionEnd)),h.render(c)}},i.wrapSelectionInTextareaWith=function(t,r,e){var n={context:this,textarea:t,leading:r,trailing:e,preventDefault:!1};if($(window).trigger("action:composer.wrapSelectionInTextareaWith",n),!n.preventDefault){e===void 0&&(e=r);var a=$(t),c=a.val(),s=/^(\s*)([\s\S]*?)(\s*)$/.exec(c.slice(t.selectionStart,t.selectionEnd));return s[2]||(s=[null,"",c.slice(t.selectionStart,t.selectionEnd),""]),a.val(c.slice(0,t.selectionStart)+s[1]+r+s[2]+e+s[3]+c.slice(t.selectionEnd)),[s[1].length,s[3].length]}},i.updateTextareaSelection=function(t,r,e){var n={context:this,textarea:t,start:r,end:e,preventDefault:!1};$(window).trigger("action:composer.updateTextareaSelection",n),!n.preventDefault&&(t.setSelectionRange(n.start,n.end),$(n.textarea).focus())},i.getBlockData=function(t,r,e){var n=t.value;r=r.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");var a=new RegExp(r,"g"),c,s=[],v;for(n=n.split(`
`).reduce(function(l,u){return l!==null||(l=e<=u.length?u:null,l===null&&(e-=u.length+1)),l},null);(c=a.exec(n))!==null;)s.push(c.index);return v={in:!!(s.reduce(function(l,u){return e>=u+2&&(l+=1),l},0)%2),atEnd:s.reduce(function(l,u){return l||e===u},!1)},v.atEnd=v.in?v.atEnd:!1,v},i}.apply(x,_),g!==void 0&&(d.exports=g)},51077:(d,x,f)=>{"use strict";var _,g;_=[f(85233)],g=function(h){var i={};return i.render=function(t,r){if(r=r||function(){},!t.find(".preview-container").is(":visible"))return r();var e=t.find("textarea");socket.emit("plugins.composer.renderPreview",e.val(),function(n,a){n||(a=$("<div>"+a+"</div>"),a.find("img:not(.not-responsive)").addClass("img-fluid"),t.find(".preview").html(a),h.fire("action:composer.preview",{postContainer:t,preview:a}),r())})},i.matchScroll=function(t){if(t.find(".preview-container").is(":visible")){var r=t.find("textarea"),e=t.find(".preview");if(r.length&&e.length){var n=r[0].scrollHeight-r.height();if(n===0)return;var a=r.scrollTop()/n;e.scrollTop(Math.max(e[0].scrollHeight-e.height(),0)*a)}}},i.handleToggler=function(t){const r=t.get(0);i.env=utils.findBootstrapEnvironment();const e=["xs","sm"].includes(i.env),n=r.querySelector('.formatting-bar [data-action="preview"]'),a=n.querySelector(".show-text"),c=n.querySelector(".hide-text"),s=localStorage.getItem("composer:previewToggled"),v=config["composer-default"].hidePreviewOnOpen==="on";let l=!e&&(s===null&&!v||s);const u=r.querySelector(".preview-container"),p=r.querySelector(".write-container");if(!n)return;function w(o){e?(u.classList.toggle("hide",!1),p.classList.toggle("maximized",!1),u.classList.toggle("d-none",!o),u.classList.toggle("d-flex",o),u.classList.toggle("w-100",o),p.classList.toggle("d-flex",!o),p.classList.toggle("d-none",o),p.classList.toggle("w-100",!o)):(u.classList.toggle("hide",!o),p.classList.toggle("w-50",o),p.classList.toggle("w-100",!o),localStorage.setItem("composer:previewToggled",o)),a.classList.toggle("hide",o),c.classList.toggle("hide",!o),o&&i.render(t),i.matchScroll(t)}i.toggle=w,n.addEventListener("click",o=>{o.button===0&&(l=!l,w(l))}),w(l)},i}.apply(x,_),g!==void 0&&(d.exports=g)}}]);
