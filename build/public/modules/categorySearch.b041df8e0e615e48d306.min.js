"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[66623],{22905:(p,y,o)=>{var l,r;l=[o(7927),o(73138)],r=function(C,m){const f={};return f.init=function(i,e){let s=null;e=e||{},e.privilege=e.privilege||"topics:read",e.states=e.states||["watching","notwatching","ignoring"],e.cacheList=e.hasOwnProperty("cacheList")?e.cacheList:!0;let g=[];Array.isArray(e.localCategories)&&(g=e.localCategories.map(c=>({...c}))),e.selectedCids=e.selectedCids||ajaxify.data.selectedCids||[];const t=i.find('[component="category-selector-search"]');if(!t.length)return;const u=t.parent('[component="category/dropdown"]').length>0||t.parent('[component="category-selector"]').length>0;i.on("show.bs.dropdown",function(){u&&(i.find(".dropdown-toggle").css({visibility:"hidden"}),t.removeClass("hidden"),t.css({"z-index":i.find(".dropdown-toggle").css("z-index")+1}));function c(){const n=t.find("input").val();n.length>1||!n&&!s?w(n,function(a){s=e.cacheList&&(s||a),h(a)}):!n&&s&&h(s)}t.on("click",function(n){n.preventDefault(),n.stopPropagation()}),t.find("input").val("").on("keyup",utils.debounce(c,300)),c()}),i.on("shown.bs.dropdown",function(){["xs","sm"].includes(utils.findBootstrapEnvironment())||t.find("input").focus()}),i.on("hide.bs.dropdown",function(){u&&(i.find(".dropdown-toggle").css({visibility:"inherit"}),t.addClass("hidden")),t.off("click"),t.find("input").off("keyup")});function w(c,n){socket.emit("categories.categorySearch",{search:c,query:utils.params(),parentCid:e.parentCid||0,selectedCids:e.selectedCids,privilege:e.privilege,states:e.states,showLinks:e.showLinks},function(a,d){if(a)return C.error(a);n(g.concat(d))})}function h(c){const n=e.selectedCids.map(String);c.forEach(function(a){a.selected=n.includes(String(a.cid))}),app.parseAndTranslate(e.template,{categoryItems:c.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(a){i.find('[component="category/list"]').html(a.find('[component="category/list"]').html()),i.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!c.length);const d=m.Dropdown.getInstance(i.find(".dropdown-toggle").get(0));d&&d.update()})}},f}.apply(y,l),r!==void 0&&(p.exports=r)}}]);
