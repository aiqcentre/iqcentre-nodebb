"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[22852,70565,83014,99617,74344],{23884:(D,v,a)=>{var c,E;c=[a(74344),a(59006),a(63281),a(7927)],E=function(f,b,O,s){const i={};function u(){return ajaxify.data.template.name.startsWith("admin/")}return i.handle=function(){$('[component="user/invite"]').on("click",function(d){d.preventDefault(),f.get(`/api/v3/users/${app.user.uid}/invites/groups`,{}).then(m=>{b.parse("modals/invite",{groups:m},function(o){O.dialog({message:o,title:`[[${u()?"admin/manage/users:invite":"users:invite"}]]`,onEscape:!0,buttons:{cancel:{label:`[[${u()?"admin/manage/users:alerts.button-cancel":"modules:bootbox.cancel"}]]`,className:"btn-default"},invite:{label:`[[${u()?"admin/manage/users:invite":"users:invite"}]]`,className:"btn-primary",callback:i.send}}})})}).catch(s.error)})},i.send=function(){const d=$("#invite-modal-emails"),m=$("#invite-modal-groups"),o={emails:d.val().split(",").map(h=>h.trim()).filter(Boolean).filter((h,P,e)=>P===e.indexOf(h)).join(","),groupsToJoin:m.val()};o.emails&&f.post(`/users/${app.user.uid}/invites`,o).then(()=>{s.success(`[[${u()?"admin/manage/users:alerts.email-sent-to":"users:invitation-email-sent"}, ${o.emails.replace(/,/g,"&#44; ")}]]`)}).catch(s.error)},i}.apply(v,c),E!==void 0&&(D.exports=E)},74344:(D,v,a)=>{a.r(v),a.d(v,{del:()=>P,get:()=>u,head:()=>d,patch:()=>o,post:()=>m,put:()=>h});var c=a(85233),E=a.n(c),f=a(63281),b=a.n(f);const O=config.relative_path+"/api/v3";function s(e,t){if(e.url=e.url.startsWith("/api")?config.relative_path+e.url:O+e.url,typeof t=="function"){i(e,t);return}return new Promise((n,l)=>{i(e,function(g,y){if(g)return g.message==="A valid login session was not found. Please log in and try again."?(0,f.confirm)("[[error:api.reauth-required]]",p=>{p&&ajaxify.go("login")}):l(g);n(y)})})}async function i(e,t){const{url:n}=e;delete e.url,e.data&&!(e.data instanceof FormData)&&(e.data=JSON.stringify(e.data||{}),e.headers["content-type"]="application/json; charset=utf-8"),{options:e}=await(0,c.fire)("filter:api.options",{options:e}),e.data&&(e.body=e.data,delete e.data);const l=await fetch(n,e),{headers:g}=l,y=g.get("content-type"),p=y&&y.startsWith("application/json");let r;if(p?r=await l.json():r=await l.text(),!l.ok)return t(new Error(p?r.status.message:r));t(null,p&&r.hasOwnProperty("status")&&r.hasOwnProperty("response")?r.response:r)}function u(e,t,n){return s({url:e+(t&&Object.keys(t).length?"?"+$.param(t):"")},n)}function d(e,t,n){return s({url:e+(t&&Object.keys(t).length?"?"+$.param(t):""),method:"head"},n)}function m(e,t,n){return s({url:e,method:"post",data:t,headers:{"x-csrf-token":config.csrf_token}},n)}function o(e,t,n){return s({url:e,method:"patch",data:t,headers:{"x-csrf-token":config.csrf_token}},n)}function h(e,t,n){return s({url:e,method:"put",data:t,headers:{"x-csrf-token":config.csrf_token}},n)}function P(e,t,n){return s({url:e,method:"delete",data:t,headers:{"x-csrf-token":config.csrf_token}},n)}}}]);
