"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[28253,70565,83014,99617,74344,86193],{74344:(k,p,s)=>{s.r(p),s.d(p,{del:()=>u,get:()=>i,head:()=>a,patch:()=>c,post:()=>r,put:()=>o});var m=s(85233),E=s.n(m),_=s(63281),x=s.n(_);const f=config.relative_path+"/api/v3";function d(t,e){if(t.url=t.url.startsWith("/api")?config.relative_path+t.url:f+t.url,typeof e=="function"){O(t,e);return}return new Promise((n,l)=>{O(t,function(g,P){if(g)return g.message==="A valid login session was not found. Please log in and try again."?(0,_.confirm)("[[error:api.reauth-required]]",y=>{y&&ajaxify.go("login")}):l(g);n(P)})})}async function O(t,e){const{url:n}=t;delete t.url,t.data&&!(t.data instanceof FormData)&&(t.data=JSON.stringify(t.data||{}),t.headers["content-type"]="application/json; charset=utf-8"),{options:t}=await(0,m.fire)("filter:api.options",{options:t}),t.data&&(t.body=t.data,delete t.data);const l=await fetch(n,t),{headers:g}=l,P=g.get("content-type"),y=P&&P.startsWith("application/json");let h;if(y?h=await l.json():h=await l.text(),!l.ok)return e(new Error(y?h.status.message:h));e(null,y&&h.hasOwnProperty("status")&&h.hasOwnProperty("response")?h.response:h)}function i(t,e,n){return d({url:t+(e&&Object.keys(e).length?"?"+$.param(e):"")},n)}function a(t,e,n){return d({url:t+(e&&Object.keys(e).length?"?"+$.param(e):""),method:"head"},n)}function r(t,e,n){return d({url:t,method:"post",data:e,headers:{"x-csrf-token":config.csrf_token}},n)}function c(t,e,n){return d({url:t,method:"patch",data:e,headers:{"x-csrf-token":config.csrf_token}},n)}function o(t,e,n){return d({url:t,method:"put",data:e,headers:{"x-csrf-token":config.csrf_token}},n)}function u(t,e,n){return d({url:t,method:"delete",data:e,headers:{"x-csrf-token":config.csrf_token}},n)}},86193:(k,p,s)=>{var m,E;m=[s(74344),s(7927)],E=function(_,x){const f={},d={delay:200,appendTo:null};f.init=i=>{const a={...d,...i},{input:r,onSelect:c}=a;app.loadJQueryUI(function(){r.autocomplete({...a,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(o,u){O(r,c,o,u)}})})},f.user=function(i,a,r){typeof a=="function"&&(r=a,a={}),a=a||{},f.init({input:i,onSelect:r,source:(c,o)=>{a.query=c.term,_.get("/api/users",a,function(u,t){if(u)return x.error(u);if(t&&t.users){const e=t.users.map(function(n){const l=$("<div></div>").html(n.username).text();return n&&{label:l,value:l,user:{uid:n.uid,name:n.username,slug:n.userslug,username:n.username,userslug:n.userslug,picture:n.picture,banned:n.banned,"icon:text":n["icon:text"],"icon:bgColor":n["icon:bgColor"]}}});o(e)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},f.group=function(i,a){f.init({input:i,onSelect:a,source:(r,c)=>{socket.emit("groups.search",{query:r.term},function(o,u){if(o)return x.error(o);if(u&&u.length){const t=u.map(function(e){return e&&{label:e.name,value:e.name,group:e}});c(t)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},f.tag=function(i,a){f.init({input:i,onSelect:a,delay:100,source:(r,c)=>{socket.emit("topics.autocompleteTags",{query:r.term,cid:ajaxify.data.cid||0},function(o,u){if(o)return x.error(o);u&&c(u),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function O(i,a,r,c){a=a||function(){};const o=jQuery.Event("keypress");o.which=13,o.keyCode=13,setTimeout(function(){i.trigger(o)},100),a(r,c)}return f}.apply(p,m),E!==void 0&&(k.exports=E)}}]);
